<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Kansai Trip</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in-up { animation: fadeInUp 0.4s ease-out forwards; }
        .animate-fade-in { animation: opacity 0.4s ease-out forwards; }
        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }
        body { background-color: #f5f5f4; -webkit-tap-highlight-color: transparent; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // --- 1. åˆå§‹åŒ– React ç’°å¢ƒè®Šæ•¸ ---
        const { useState, useEffect, useRef } = React;
        const { createRoot } = ReactDOM;

        // --- 2. å…§å»ºåœ–ç¤ºçµ„ä»¶ (SVG) ---
        // ç‚ºäº†é¿å…å¤–éƒ¨è¼‰å…¥å¤±æ•—ï¼Œç›´æ¥å®šç¾©ç°¡å–®çš„ SVG åœ–ç¤º
        const IconBase = ({ d, color, className, size = 18 }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={`${color || ''} ${className || ''}`}>
                <path d={d} />
            </svg>
        );

        const Icons = {
            MapPin: (p) => <IconBase {...p} d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z M12 7a3 3 0 1 0 0 6 3 3 0 0 0 0-6" />,
            Navigation: (p) => <IconBase {...p} d="M3 11l19-9-9 19-2-8-8-2z" />,
            Utensils: (p) => <IconBase {...p} d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2 M7 2v20 M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7" />,
            Train: (p) => <IconBase {...p} d="M17.2 20a2 2 0 0 0-1.5-2.6l-8-2.3A2 2 0 0 0 6 18.5V21a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-1z M2 9l20-5M8 21v-4 M16 21v-4" />, // Simplified
            Sun: (p) => <IconBase {...p} d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41M12 7a5 5 0 1 0 0 10 5 5 0 0 0 0-10z" />,
            Cloud: (p) => <IconBase {...p} d="M17.5 19c0-3.037-2.463-5.5-5.5-5.5S6.5 15.963 6.5 19M17.5 19H9M17.5 19a5.5 5.5 0 0 0 5-5.5c0-3-2.5-5.5-5.5-5.5h-1.7" />, // Simplified
            CloudRain: (p) => <IconBase {...p} d="M16 13v8M8 13v8M12 15v8M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25" />,
            Snowflake: (p) => <IconBase {...p} d="M2 12h20M12 2v20M20 20l-5-5M20 4l-5 5M4 20l5-5M4 4l5 5" />,
            Info: (p) => <IconBase {...p} d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10zM12 8v4M12 16h.01" />, // Shield-ish
            ShoppingBag: (p) => <IconBase {...p} d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4zM3 6h18M16 10a4 4 0 0 1-8 0" />,
            Calendar: (p) => <IconBase {...p} d="M19 4H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zM16 2v4M8 2v4M3 10h18" />,
            Plane: (p) => <IconBase {...p} d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" />,
            Hotel: (p) => <IconBase {...p} d="M10 22v-6.57M14 22v-6.57M2 22h20M4 22V4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v18M8 6h.01M16 6h.01M8 10h.01M16 10h.01" />,
            Camera: (p) => <IconBase {...p} d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2zM12 13a4 4 0 1 0 0-8 4 4 0 0 0 0 8z" />,
            Star: (p) => <IconBase {...p} d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />,
            CreditCard: (p) => <IconBase {...p} d="M21 8V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v3M22 8H2M2 12v7a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" />,
            Car: (p) => <IconBase {...p} d="M14 16H9m10 0h3v-3.15M17 16h-3m-9 0H2v-3.15M7 16h3M5 12.85V11a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v1.85M19 16v3h.65M17 19h-2m-9 0H5M2 19h.65" />, // Simplified
            NotebookPen: (p) => <IconBase {...p} d="M2 20h20M5 20V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v15M17 17l-4-4" />, // Simplified
            ExternalLink: (p) => <IconBase {...p} d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6M15 3h6v6M10 14L21 3" />,
            Map: (p) => <IconBase {...p} d="M1 6v16l7-4 8 4 7-4V2l-7 4-8-4-7 4zM8 2v16M16 6v16" />
        };

        // --- 3. è³‡æ–™çµæ§‹ ---
        const TRIP_DATA = {
          flights: [
            {
              type: "Departure",
              date: "2025/12/27 (å…­)",
              code: "CX564",
              airline: "åœ‹æ³°èˆªç©º",
              route: "TPE å°åŒ— (11:15) â” KIX å¤§é˜ª (14:55)",
              terminal: "TPE T1 / KIX T1",
              duration: "2h 40m",
              aircraft: "Airbus A330-300",
              class: "ç¶“æ¿Ÿ Q"
            },
            {
              type: "Return",
              date: "2026/01/04 (æ—¥)",
              code: "CX565",
              airline: "åœ‹æ³°èˆªç©º",
              route: "KIX å¤§é˜ª (16:15) â” TPE å°åŒ— (18:30)",
              terminal: "KIX T1 / TPE T1",
              duration: "3h 25m",
              aircraft: "Airbus A330-300",
              class: "ç¶“æ¿Ÿ S"
            }
          ],
          hotels: [
            {
              name: "è‰æ´¥æ³¢å£«é “å»£å ´é£¯åº—",
              engName: "Hotel Boston Plaza Kusatsu",
              dates: "12/27 - 1/1 (5æ™š)",
              location: "æ»‹è³€ç¸£è‰æ´¥å¸‚ (JRè‰æ´¥ç«™æ—)",
              features: ["äº¤é€šä¾¿åˆ©", "ç¾å¼é¢¨æ ¼", "é©åˆè‡ªé§•"],
              note: "ä½œç‚ºæ»‹è³€ç¸£äººå­”è“‹å¡æ”¶é›†çš„åŸºåœ°éå¸¸åˆé©ã€‚"
            },
            {
              name: "REF äº¬éƒ½å…«æ¢å£ by VESSEL HOTELS",
              engName: "REF Kyoto Hachijoguchi",
              dates: "1/1 - 1/4 (3æ™š)",
              location: "äº¬éƒ½å¸‚å—å€ (äº¬éƒ½ç«™å…«æ¢å£)",
              features: ["å¤§æµ´å ´", "ç¾ä»£æ—¥å¼", "å…è²»è¿è³“é£²æ–™"],
              note: "é è¿‘äº¬éƒ½è»Šç«™ï¼Œæ–¹ä¾¿å‰å¾€ç¥æˆ¶ã€å¥ˆè‰¯èˆ‡å›ç¨‹æ©Ÿå ´ã€‚"
            }
          ],
          itinerary: [
            {
              id: "day1",
              date: "12/27",
              dayOfWeek: "å…­",
              location: "å¤§é˜ª â” æ»‹è³€",
              weather: "sunny",
              temp: "8Â°C",
              items: [
                { type: "transport", time: "11:15", title: "æ­ä¹˜ CX564 é£›å¾€å¤§é˜ª", note: "é è¨ˆ 14:55 æŠµé”é—œè¥¿æ©Ÿå ´ T1" },
                { type: "visit", time: "15:30", title: "è‡¨ç©ºåŸè§€å…‰æ¡ˆå…§æ‰€", tag: "æ”¶é›†", note: "ğŸ”¥ é ˜å–äººå­”è“‹å¡/ç´€å¿µå“ã€‚ç‡Ÿæ¥­è‡³20:00ã€‚", mapUrl: null }, 
                { type: "shop", time: "16:00", title: "è‡¨ç©ºåŸ Outlet", highlight: "å¿…è²·: é‹å‹•å“ç‰Œã€æ—¥ç³»æœé£¾", note: "æ™šé¤å¯åœ¨æ­¤è§£æ±ºã€‚ç‡Ÿæ¥­è‡³20:00ã€‚" },
                { type: "transport", time: "19:00", title: "å‰å¾€è‰æ´¥", note: "é—œè¥¿æ©Ÿå ´ â†’ äº¬éƒ½è»Šç«™ â†’ è‰æ´¥è»Šç«™" },
                { type: "hotel", time: "21:30", title: "å…¥ä½ï¼šè‰æ´¥æ³¢å£«é “å»£å ´é£¯åº—", note: "ä½æ–¼è‰æ´¥ç«™è¥¿å£ï¼Œä¼‘æ¯æº–å‚™æ˜æ—¥è‡ªé§•ã€‚" }
              ]
            },
            {
              id: "day2",
              date: "12/28",
              dayOfWeek: "æ—¥",
              location: "æ»‹è³€è‡ªé§•",
              weather: "cloudy",
              temp: "6Â°C",
              items: [
                { type: "transport", time: "08:00", title: "ç§Ÿè»Šï¼šToyota Rent a Car", note: "è‰æ´¥ç«™è¥¿å£åº—å–è»Šã€‚", mapUrl: "https://goo.gl/maps/search/Toyota+Rent+a+Car+Kusatsu" },
                { 
                  type: "visit", 
                  time: "09:40", 
                  title: "Kusatsu Yume-Honjin", 
                  tag: "æ”¶é›†", 
                  note: "ãã•ã¤å¤¢æœ¬é™£ï¼Œé ˜å–äººå­”è“‹å¡ã€‚09:30é–‹é–€ã€‚",
                  parkingUrl: null
                },
                { type: "visit", time: "10:20", title: "æ —æ±è¦³å…‰æ¡ˆå†…æ‰€ (2F)", tag: "æ”¶é›†", note: "ä½æ–¼æ‰‹åŸç«™ã€‚æ³¨æ„ç‡Ÿæ¥­æ™‚é–“è‡³12:00 (é€šå¸¸å‡æ—¥å¯èƒ½æœ‰è®Šå‹•ï¼Œè«‹å„ªå…ˆå‰å¾€)ã€‚" },
                { type: "visit", time: "11:00", title: "å®ˆå±±å¸‚é§…å‰ç·åˆæ¡ˆå†…æ‰€", tag: "æ”¶é›†", note: "ä½æ–¼å®ˆå±±ç«™ã€‚07:30æ—©é–‹ã€‚" },
                { type: "visit", time: "12:00", title: "å…«æ—¥å¸‚é§…å‰è¦³å…‰äº¤æµæ–½è¨­", tag: "æ”¶é›†", note: "æ±è¿‘æ±Ÿå¸‚çš„å¤§é¢¨ç®åšç‰©é¤¨é™„è¿‘ã€‚" },
                { type: "visit", time: "13:00", title: "æ±è¿‘æ±Ÿå¸‚å½¹æ‰€ å®ˆè¡›å®¤", tag: "æ”¶é›†", note: "ç‡Ÿæ¥­æ™‚é–“ (10:00â€“16:00)ã€‚è«‹ç¢ºèªå®ˆè¡›å®¤ä½ç½®ã€‚" },
                { type: "visit", time: "14:00", title: "å½¥æ ¹å¸‚ä¸Šä¸‹æ°´é“ä¸­å¿ƒ", tag: "æ”¶é›†", note: "éœ€å¹³æ—¥æˆ–ç‰¹å®šå‡æ—¥çª—å£ï¼Œè«‹ç¢ºèªå®ˆè¡›å®¤ä½ç½®ã€‚" },
                { type: "visit", time: "14:30", title: "Hikonyan Museum", highlight: "å¿…çœ‹: å½¥æ ¹è²“(Hikonyan)è¡¨æ¼”å ´æ¬¡", note: "ğŸ”¥ å½¥æ ¹è²“åšç‰©é¤¨ã€‚" },
                { type: "visit", time: "15:30", title: "å½¥æ ¹åŸ", highlight: "åœ‹å¯¶äº”åŸ", note: "è³æ«»åæ‰€(é›–æ˜¯å†¬å¤©)ã€‚" },
                { type: "shop", time: "17:30", title: "MITSUI OUTLET PARK æ»‹è³€é¾ç‹", highlight: "é—œè¥¿æœ€å¤§ç´š Outlet", note: "æ™šé¤æ¨è–¦è¿‘æ±Ÿç‰›æ–™ç†ã€‚" }
              ]
            },
            {
              id: "day3",
              date: "12/29",
              dayOfWeek: "ä¸€",
              location: "æµ·ä¹‹äº¬éƒ½",
              weather: "rain",
              temp: "4Â°C",
              items: [
                { type: "visit", time: "09:00", title: "ä¼Šæ ¹ç£è³æ™¯è§€å…‰èˆ¹", highlight: "å¿…æ‹: èˆŸå±‹ç¾¤", note: "è³¼è²·è¦æ¢é¤µæµ·é·—ã€‚éŠè¦½æ™‚é–“ç´„25åˆ†é˜ã€‚" },
                { type: "visit", time: "10:30", title: "é“ã®é§… æµ·ã®äº¬éƒ½ å®®æ´¥", tag: "æ”¶é›†", note: "å®®æ´¥è§€å…‰æ¡ˆå…§æ‰€é ˜å–äººå­”è“‹å¡ã€‚" },
                { type: "food", time: "12:00", title: "åˆé¤ï¼šå¤©æ©‹ç«‹å‘¨é‚Š", highlight: "å¿…åƒ: è›¤è £ä¸¼ (Asari Don)", note: "æ¨è–¦ï¼šå¯Œç”°å±‹ (æµ·é®®è¶…å€¼)ã€Suginoyaã€æµ·é®®å·¥æˆ¿ã€‚" },
                { type: "visit", time: "13:30", title: "å¤©æ©‹ç«‹ (å‚˜æ¾å…¬åœ’)", highlight: "æ—¥æœ¬ä¸‰æ™¯", note: "æ­ä¹˜çºœè»Š/åŠæ¤…ä¸Šå±±ï¼Œå¾èƒ¯ä¸‹çªºçœ‹ã€Œé£›é¾åœ¨å¤©ã€ã€‚" },
                { type: "visit", time: "15:00", title: "å…ƒä¼Šå‹¢ ç± ç¥ç¤¾ & æ™ºæ©å¯º", note: "åƒæ‹œå¤è€ç¥ç¤¾ã€‚" },
                { type: "visit", time: "16:00", title: "å¤©æ©‹ç«‹ View Land", note: "å¾å¦ä¸€å´çœ‹é£›é¾è§€ã€‚æ³¨æ„çºœè»Šæœ«ç­æ™‚é–“ (å†¬å­£ç´„16:30-17:00)ã€‚" }
              ]
            },
            {
              id: "day4",
              date: "12/30",
              dayOfWeek: "äºŒ",
              location: "é•·æ¿±/çµç¶æ¹–",
              weather: "cloudy",
              temp: "5Â°C",
              items: [
                { type: "visit", time: "08:50", title: "ç«¹ç”Ÿå³¶è§€å…‰èˆ¹", note: "å¾é•·æ¿±æ¸¯å‡ºç™¼ã€‚ç«¹ç”Ÿå³¶æ˜¯èƒ½é‡æ™¯é» (Power Spot)ã€‚" },
                { type: "visit", time: "10:00", title: "ç«¹ç”Ÿå³¶ å¯¶åš´å¯º", highlight: "æŠ•æ“²ç“¦ç‰‡ç¥ˆç¦", note: "åƒæ‹œå¼è²¡å¤©ã€‚" },
                { type: "visit", time: "12:00", title: "é»‘å£å»£å ´ (é»‘å£Square)", highlight: "å¿…åƒ: 96Cafe é»‘å’–å“©", note: "ç»ç’ƒå·¥è—å“åº—æ—ç«‹ï¼Œå……æ»¿å¤§æ­£æµªæ¼«æ°›åœã€‚" },
                { type: "visit", time: "14:30", title: "å¤šè³€å¤§ç¤¾", highlight: "é•·å£½ç¥ˆé¡˜", note: "æ»‹è³€ç¸£ç¬¬ä¸€å¤§ç¤¾ï¼Œé–€å£æœ‰è‘—åã€Œç³¸åˆ‡é¤…ã€ã€‚" },
                { type: "visit", time: "16:00", title: "è¿‘æ±Ÿç¥å®®", highlight: "èŠ±ç‰Œæƒ…ç·£è–åœ°", note: "ä»¥ç«¶æŠ€æ­Œç‰Œèåï¼Œå»ºç¯‰æœ±ç´…ç¾éº—ã€‚" }
              ]
            },
            {
              id: "day5",
              date: "12/31",
              dayOfWeek: "ä¸‰",
              location: "è¿‘æ±Ÿå…«å¹¡",
              weather: "snow",
              temp: "3Â°C",
              items: [
                { 
                  type: "transport", 
                  time: "08:00", 
                  title: "æ—¥ç‰Ÿç¦®å…«å¹¡å®®å‰ ç„¡æ–™é§è»Šå ´ï¼ˆé‡Œé“ï¼‰", 
                  note: "æ–°å¹´åƒæ‹œæˆ–éŠè¦½å…«å¹¡å €å‰åœè»Šã€‚"
                },
                { 
                  type: "visit", 
                  time: "09:00", 
                  title: "å…«å¹¡å±±çºœè»Š & åŸè·¡", 
                  note: "çœºæœ›çµç¶æ¹–èˆ‡è¥¿ä¹‹æ¹–ç¾æ™¯ã€‚",
                },
                { type: "visit", time: "10:30", title: "å…«å¹¡å €éŠèˆ¹", highlight: "æ™‚ä»£åŠ‡å–æ™¯åœ°", note: "åœ¨å……æ»¿é¢¨æƒ…çš„æ°´é„‰ä¹˜èˆ¹æ¼«éŠã€‚" },
                { type: "visit", time: "12:30", title: "La Collina è¿‘æ±Ÿå…«å¹¡", highlight: "å¿…è²·: Club Harie å¹´è¼ªè›‹ç³•", note: "å»ºç¯‰å¤§å¸«è—¤æ£®ç…§ä¿¡è¨­è¨ˆçš„ç«¥è©±è‰å±‹ã€‚å¿…åƒç¾çƒ¤å¹´è¼ªè›‹ç³•ã€éŠ…é‘¼ç‡’ã€‚" },
                { 
                  type: "food", 
                  time: "17:00", 
                  title: "è·¨å¹´æ™šé¤", 
                  note: "å»ºè­°æå‰é è¨‚é¤å»³ï¼Œæˆ–åœ¨è¶…å¸‚è³¼è²·è±ç››æ™šé¤å›é£¯åº—äº«ç”¨ã€‚", 
                  mapUrl: null 
                },
                { 
                  type: "transport", 
                  time: "20:00", 
                  title: "é‚„è»Šï¼šãƒˆãƒ¨ã‚¿ãƒ¬ãƒ³ã‚¿ãƒªãƒ¼ã‚¹æ»‹è³€ è‰æ´¥é§…è¥¿å£åº—", 
                  note: "å‹™å¿…æ–¼ 20:00 å‰å®Œæˆé‚„è»Šæ‰‹çºŒï¼ŒçµæŸè‡ªé§•è¡Œç¨‹ã€‚", 
                  mapUrl: "https://goo.gl/maps/search/Toyota+Rent+Lease+Kusatsu" 
                }
              ]
            },
            {
              id: "day6",
              date: "1/1",
              dayOfWeek: "å››",
              location: "ç¥æˆ¶/åˆè©£",
              weather: "sunny",
              temp: "7Â°C",
              items: [
                { 
                  type: "transport", 
                  time: "08:00", 
                  title: "ç§»å‹•è‡³äº¬éƒ½ä¸¦å‰å¾€ç¥æˆ¶", 
                  note: "å…ˆå» REF äº¬éƒ½é£¯åº—å¯„æ”¾è¡Œæï¼Œå†æ­é˜ªæ€¥å‰å¾€ç¥æˆ¶ä¸‰å®®ã€‚",
                },
                { 
                  type: "visit", 
                  time: "10:30", 
                  title: "ç”Ÿç”°ç¥ç¤¾", 
                  highlight: "æˆ€æ„›çµç·£", 
                  note: "æ–°å¹´åƒæ‹œ (åˆè©£) äººæ½®çœ¾å¤šï¼Œè«‹é ç•™æ™‚é–“ã€‚",
                },
                { type: "visit", time: "12:00", title: "åŒ—é‡å¤©æ»¿ç¥ç¤¾", note: "ä½æ–¼ç•°äººé¤¨å€çš„é«˜é»ã€‚" },
                { 
                  type: "visit", 
                  time: "14:00", 
                  title: "ç¥æˆ¶æ©Ÿå ´ ç¶œåˆæ¡ˆå…§æ‰€", 
                  tag: "æ”¶é›†", 
                  note: "é ˜å–äººå­”è“‹å¡ã€‚æ­ä¹˜ Port Liner å‰å¾€ã€‚",
                },
                { 
                  type: "visit", 
                  time: "16:30", 
                  title: "å¤§é³¥å¤§ç¤¾", 
                  tag: "æ”¶é›†", 
                  note: "å¤§é˜ªå ºå¸‚ã€‚é †è·¯åƒæ‹œã€‚",
                },
                { 
                  type: "shop", 
                  time: "18:30", 
                  title: "å¯¶å¯å¤¢ä¸­å¿ƒ å¤§é˜ªåº— DXå¤§ä¸¸å¿ƒé½‹æ©‹9F", 
                  highlight: "å¿…è²·: é™å®šå•†å“", 
                  note: "ç‡Ÿæ¥­æ™‚é–“10:00â€“20:00ã€‚æ™šé¤å¯åœ¨æ­¤é™„è¿‘è§£æ±ºã€‚",
                },
                { 
                  type: "shop", 
                  time: "20:00", 
                  title: "å¯¶å¯å¤¢ä¸­å¿ƒ å¤§é˜ªå¤§ä¸¸æ¢…ç”°13F", 
                  highlight: "å¿…è²·: é™å®šå•†å“", 
                  note: "âš ï¸ ç‡Ÿæ¥­æ™‚é–“10:00â€“20:00ã€‚è«‹æ³¨æ„ï¼Œå¿ƒé½‹æ©‹èˆ‡æ¢…ç”°å…©åº—çš†æ–¼20:00é—œé–€ï¼Œå»ºè­°é¸æ“‡å…¶ä¸€æˆ–æå‰èª¿æ•´è¡Œç¨‹ã€‚",
                }
              ]
            },
            {
              id: "day7",
              date: "1/2",
              dayOfWeek: "äº”",
              location: "å¥ˆè‰¯/å®‡æ²»",
              weather: "sunny",
              temp: "6Â°C",
              items: [
                { type: "visit", time: "08:30", title: "æ˜¥æ—¥å¤§ç¤¾", highlight: "é¹¿èˆ‡ç‡ˆç± ", note: "åƒé“ä¸Šçš„é¹¿ç¾¤å¾ˆå¯æ„›ä½†è«‹å°å¿ƒä»™è²ã€‚" },
                { type: "food", time: "11:00", title: "æ°´è°·èŒ¶å±‹", highlight: "èŒ…è‰å±‹èŒ¶å±‹", note: "æ‹ç…§è¶…ç¾ï¼Œæ¨è–¦çƒé¾éºµæˆ–è•¨é¤…ã€‚" },
                { type: "visit", time: "12:30", title: "æ±å¤§å¯º & äºŒæœˆå ‚", highlight: "ä¸–ç•Œæœ€å¤§æœ¨é€ å»ºç¯‰", note: "å¿…çœ‹å¤§ä½›ã€‚äºŒæœˆå ‚å¯ä¿¯ç°å¥ˆè‰¯å¸‚æ™¯ã€‚" },
                { type: "visit", time: "13:30", title: "å¾¡éœŠç¥ç¤¾", note: "å¥ˆè‰¯å¸‚å¾¡éœŠç¥ç¤¾ã€‚" },
                { type: "visit", time: "14:30", title: "å¥ˆè‰¯ç”ºå—è¦³å…‰æ¡ˆå†…æ‰€", tag: "æ”¶é›†", note: "é ˜å–å¥ˆè‰¯äººå­”è“‹å¡ã€‚" },
                { type: "visit", time: "15:30", title: "å®‡æ²»è¦³å…‰ã‚»ãƒ³ã‚¿ãƒ¼", tag: "æ”¶é›†", note: "é ˜å–å®‡æ²»äººå­”è“‹å¡ã€‚é †ä¾¿é€›è¡¨åƒé“ã€‚" },
                { type: "shop", time: "16:30", title: "å‰ä¼Šå¡å“‡ (Chikawa) ä¼è¦‹åº—", highlight: "äº¬éƒ½é™å®š", note: "Mogumogu æœ¬èˆ–ã€‚å¿…è²·ä¼è¦‹ç¨»è·é™å®šå‘¨é‚Šã€‚" }
              ]
            },
            {
              id: "day8",
              date: "1/3",
              dayOfWeek: "å…­",
              location: "äº¬éƒ½å·¡ç¦®",
              weather: "cloudy",
              temp: "5Â°C",
              items: [
                { type: "visit", time: "08:30", title: "å¤©é¾å¯º (åµå±±)", highlight: "æ›¹æºæ± åº­åœ’", note: "ä¸–ç•Œéºç”¢ã€‚æ—©æ™¨äººè¼ƒå°‘ï¼Œç©ºæ°£æ¸…æ–°ã€‚" },
                { 
                  type: "visit", 
                  time: "10:30", 
                  title: "å°‹æ‰¾é³³ç‹äººå­”è“‹", 
                  tag: "æ”¶é›†", 
                  note: "å¯¶å¯å¤¢äººå­”è“‹ã€é³³ç‹ã€ä½æ–¼äº¬éƒ½ï¼ˆé€šå¸¸åœ¨å…¬åœ’æˆ–åœ°æ¨™å‰ï¼‰ã€‚",
                },
                { type: "visit", time: "13:00", title: "ä»å’Œå¯º", note: "ä»¥å¾¡å®¤æ«»èåï¼ˆé›–éèŠ±å­£ï¼‰ï¼Œçš‡å®¤æ·µæºæ·±åšã€‚" },
                { type: "visit", time: "15:00", title: "å¹³å®‰ç¥å®®", note: "å·¨å¤§çš„ç´…è‰²é³¥å±…ã€‚è…¹åœ°å»£å¤§ã€‚" },
                { type: "shop", time: "16:30", title: "Pokemon Center Kyoto", highlight: "è—å¦“çš®å¡ä¸˜", note: "ä½æ–¼ SUINA å®¤ç”º 2Fã€‚å¿…è²·äº¬éƒ½é™å®šç©å¶ã€‚" },
                { 
                  type: "shop", 
                  time: "18:00", 
                  title: "å‰ä¼Šå¡å“‡ Land äº¬éƒ½å››æ¢æ²³åŸç”º", 
                  note: "Kiddyland å…§ã€‚ç¹¼çºŒè£œè²¨ã€‚", 
                }
              ]
            },
            {
              id: "day9",
              date: "1/4",
              dayOfWeek: "æ—¥",
              location: "å¤§é˜ª â” å°åŒ—",
              weather: "sunny",
              temp: "8Â°C",
              items: [
                { type: "transport", time: "08:12", title: "å‰å¾€å¤§é˜ª", note: "äº¬éƒ½è»Šç«™ â†’ å¤§é˜ªï¼ˆå¯„æ”¾è¡Œææˆ–ç›´æ¥å‰å¾€æ™¯é»ï¼‰ã€‚" },
                { type: "visit", time: "09:30", title: "ATC Green Eco Plaza", note: "ä½æ–¼å—æ¸¯ã€‚å…¼å…·ç’°ä¿æ•™è‚²èˆ‡è§€å…‰ã€‚" },
                { type: "visit", time: "11:00", title: "å ºæ±è¦³å…‰æ¡ˆå†…æ‰€", tag: "æ”¶é›†", note: "é ˜å–å ºå¸‚äººå­”è“‹å¡ã€‚" },
                { 
                  type: "visit", 
                  time: "12:00", 
                  title: "å²¸å’Œç”°ç«™å‰è§€å…‰æ¡ˆå…§æ‰€", 
                  tag: "æ”¶é›†", 
                  note: "ä»¥å²¸å’Œç”°ç¥­ï¼ˆæ‹‰è»Šç¥­ï¼‰èåã€‚",
                },
                { 
                  type: "visit", 
                  time: "13:30", 
                  title: "ã¾ã¡ã®é§…ã‹ã„ã¥ã‹", 
                  tag: "æ”¶é›†", 
                  note: "è²å¡šå¸‚äººå­”è“‹å¡ã€‚ç‡Ÿæ¥­æ™‚é–“10:00â€“19:00ã€‚",
                },
                { type: "visit", time: "15:00", title: "æ³‰ä½é‡å¸‚è¦³å…‰æƒ…å ±ã‚»ãƒ³ã‚¿ãƒ¼", tag: "æ”¶é›†", note: "é—œè¥¿æ©Ÿå ´å°å²¸ï¼Œæœ€å¾Œä¸€ç«™æ”¶é›†ï¼" },
                { type: "transport", time: "16:15", title: "æ­ä¹˜ CX565 è¿”å°", note: "å†è¦‹é—œè¥¿ï¼é è¨ˆ 18:30 æŠµé”å°åŒ—ã€‚" } 
              ]
            }
          ],
          manholeStock: [
            { name: "è‡¨ç©ºåŸæ¡ˆå…§æ‰€", region: "å¤§é˜ª", hours: "09:00â€“20:00", url: "https://www.city.izumisano.lg.jp/kakuka/jogesuidokyoku/jogesui/menu/1511934914176.html" },
            { name: "å¤§æ´¥è»Šç«™è§€å…‰æ¡ˆå†…æ‰€", region: "æ»‹è³€", hours: "09:00â€“18:00", url: "https://www.city.otsu.lg.jp/kigyo/about/koho/68041.html", highlight: true },
            { name: "ãã•ã¤å¤¢æœ¬é™£", region: "æ»‹è³€", hours: "09:00â€“17:00", url: "https://www.city.kusatsu.shiga.jp/kurashi/suidogesuido/gesuido/manholecard.html" },
            { name: "è‰æ´¥å®¿è¡—é“äº¤æµé¤¨", region: "æ»‹è³€", hours: "09:00â€“17:00", url: "https://www.city.kusatsu.shiga.jp/kurashi/suidogesuido/gesuido/manholecard.html" },
            { name: "æ —æ±è¦³å…‰æ¡ˆå†…æ‰€ äºŒæ¨“", region: "æ»‹è³€", hours: "08:30â€“12:00", url: "https://www.city.ritto.lg.jp/soshiki/jogeuido/jogesuido/oshirase/7224.html" },
            { name: "æ —æ±å¸‚ç«‹å›³æ›¸é¤¨", region: "æ»‹è³€", hours: "10:00â€“17:00", url: "https://www.city.ritto.lg.jp/soshiki/jogeuido/jogesuido/oshirase/7224.html", highlight: true },
            { name: "å®ˆå±±å¸‚é§…å‰ç·åˆæ¡ˆå†…æ‰€", region: "æ»‹è³€", hours: "07:30â€“19:30", url: "https://www.city.moriyama.lg.jp/kurashitetsuzuki/jougesuido/1001701/1008797.html" },
            { name: "å…«æ—¥å¸‚é§…å‰è¦³å…‰äº¤æµæ–½è¨­", region: "æ»‹è³€", hours: "10:00â€“17:00", url: "https://www.city.higashiomi.shiga.jp/kurashi_tetsuzuki/jougesuidou/1008975/1009690.html" },
            { name: "æ±è¿‘æ±Ÿå¸‚å½¹æ‰€ å®ˆè¡›å®¤", region: "æ»‹è³€", hours: "10:00â€“16:00", url: "https://www.city.higashiomi.shiga.jp/kurashi_tetsuzuki/jougesuidou/1008975/1008976.html", highlight: false },
            { name: "è±Šéƒ·ç”ºè¦³å…‰æ¡ˆå†…æ‰€", region: "æ»‹è³€", hours: "09:00â€“17:00", url: "https://www.town.toyosato.shiga.jp/0000001749.html", highlight: true },
            { name: "å½¥æ ¹å¸‚ä¸Šä¸‹æ°´é“æ–™é‡‘ãŠå®¢æ§˜ã‚µãƒ¼ãƒ“ã‚¹ã‚»ãƒ³ã‚¿ãƒ¼", region: "æ»‹è³€", hours: "09:00â€“17:00", url: "https://www.city.hikone.lg.jp/kakuka/jogesuido/2/2219.html" },
            { name: "ã²ã“ã­é£Ÿè³“é¤¨å››ç•ªç”ºãƒ€ã‚¤ãƒ‹ãƒ³ã‚°", region: "æ»‹è³€", hours: "10:00â€“17:00", url: "https://www.city.hikone.lg.jp/kakuka/jogesuido/2/2219.html" },
            { name: "ã€Œé“ã®é§… æµ·ã®äº¬éƒ½ å®®æ´¥ã€è¦³å…‰æ¡ˆå†…æ‰€", region: "äº¬éƒ½", hours: "09:00â€“18:00", url: "https://www.pref.kyoto.jp/gesuido/manholemiyazu.html" },
            { name: "ç¥æˆ¸ç©ºæ¸¯ 1 éšç·åˆæ¡ˆå†…æ‰€", region: "å…µåº«", hours: "07:00â€“23:00", url: "https://www.city.kobe.lg.jp/a78445/kurashi/sumai/sewage/pr/manhole_card.html" },
            { name: "èŠ¦å±‹å¸‚å½¹æ‰€å®ˆè¡›å®¤", region: "å…µåº«", hours: "09:00â€“17:00", url: "https://www.city.ashiya.lg.jp/gesuidou/mhc.html", highlight: true },
            { name: "å¤§é˜ªè¦³å…‰æ¡ˆå†…æ‰€(JR è»Šç«™å…§)", region: "å¤§é˜ª", hours: "07:00â€“21:00", url: "https://www.city.osaka.lg.jp/kensetsu/page/0000431121.html" },
            { name: "å¥ˆè‰¯ç”ºå—è¦³å…‰æ¡ˆå†…æ‰€", region: "å¥ˆè‰¯", hours: "09:00â€“17:00", url: "https://h2o.nara.nara.jp/info_924.html" },
            { name: "å®‡æ²»å¸‚è¦³å…‰ã‚»ãƒ³ã‚¿ãƒ¼", region: "äº¬éƒ½", hours: "09:00â€“17:00", url: "https://www.city.uji.kyoto.jp/soshiki/12/6038.html" },
            { name: "å¤§é˜ªå¸‚ä¸‹æ°´é“ç§‘å­¸é¤¨(éœ€è³¼ç¥¨å…¥å ´å¾Œå¡«å¯«å•åˆ¸)", region: "å¤§é˜ª", hours: "09:30â€“17:00", url: "https://www.city.osaka.lg.jp/kensetsu/page/0000431121.html", highlight: true },
            { name: "ãŠãŠã•ã‹ ATC ã‚°ãƒªãƒ¼ãƒ³ã‚¨ã‚³ãƒ—ãƒ©ã‚¶", region: "å¤§é˜ª", hours: "10:00â€“17:00", url: "https://www.city.osaka.lg.jp/kensetsu/page/0000431121.html" },
            { name: "å ºæ±è¦³å…‰æ¡ˆå†…æ‰€", region: "å¤§é˜ª", hours: "09:00â€“19:00", url: "https://water.city.sakai.lg.jp/about/kouhou/1522311572373.html" },
            { name: "å²¸å’Œç”°é§…å‰è¦³å…‰æ¡ˆå†…æ‰€", region: "å¤§é˜ª", hours: "09:00â€“17:00", url: "https://www.city.kishiwada.lg.jp/page/56-manholecard.html" },
            { name: "ã¾ã¡ã®é§…ã‹ã„ã¥ã‹", region: "å¤§é˜ª", hours: "10:00â€“19:00", url: "https://www.city.kaizuka.lg.jp/kakuka/jogesuido/gesuisuisin/topics/manholucard.html" },
            { name: "æ³‰ä½é‡å¸‚è¦³å…‰æƒ…å ±ã‚»ãƒ³ã‚¿ãƒ¼", region: "å¤§é˜ª", hours: "10:00â€“16:00", url: "https://www.city.izumisano.lg.jp/kakuka/jogesuidokyoku/jogesui/menu/1511934914176.html" },
          ],
          notes: [
            {
              date: "12/27ï¼ˆå…­ï¼‰",
              links: [
                { title: "è‡¨ç©ºåŸ Outlet é›»å­åœ°åœ–", url: "https://platinumaps.jp/d/premiumoutlets-rinku?floor=1F", note: "Nikeæ²’æœ‰å…ç¨…" }
              ],
              dining: [
                { name: "æ±äº¬æ²¹çµ„ç·æœ¬åº— æ»‹è³€çµ„", hours: "11:00â€“02:00", mapUrl: null },
                { name: "éººå±‹EDITIONè‰æ´¥åº—", hours: "17:00â€“02:45" },
                { name: "ã‚«ãƒãƒ‰ã®ã‚¿ã‚³", hours: "12:00â€“23:00 (å±…é…’å±‹)", mapUrl: null }
              ]
            },
            {
              date: "12/28ï¼ˆæ—¥ï¼‰",
              links: [
                { title: "MITSUI OUTLET PARK æ»‹è³€é¾ç‹åœ°åœ–", url: "https://mitsui-shopping-park.com/mop/file/filer/shiga/floor/00008_fo.pdf", note: "PDFä¸‹è¼‰" }
              ]
            },
            {
              date: "12/29ï¼ˆä¸€ï¼‰",
              links: [
                { title: "ä¼Šæ ¹æ¹¾ã‚ãã‚ŠéŠè¦§èˆ¹", url: "https://www.inewan.com/inewan_cruise/", note: "1,200å††" },
                { title: "å‚˜æ¾è¦³å…‰åˆ¸", url: "https://www.tankai.jp/tourist_tickets/#inekasamatsu", note: "2,000å††åˆ¸" },
                { title: "å¤©æ©‹ç«‹ãƒ“ãƒ¥ãƒ¼ãƒ©ãƒ³ãƒ‰ (çºœè»Š)", url: "https://www.viewland.jp/tw/eigyou/", note: "1,000å††" }
              ],
              dining: [
                { area: "å‚˜æ¾", spots: [{ name: "Suginoya", hours: "11:30â€“16:00", note: "çƒå†¬" }] },
                { area: "å¤©æ©‹ç«‹", spots: [{ name: "æµ·é®®å·¥æˆ¿ æ©‹ç«‹ç‰©ç”¢ æ¾è‘‰èŸ¹ç›´è³£", hours: "11:00â€“17:00" }] },
                { area: "å®®æ´¥åˆé¤", spots: [
                    { name: "çƒå†¬å°åƒå¤§é–€", hours: "11:30â€“14:30ã€17:30â€“20:30", mapUrl: null },
                    { name: "ã“ã‚“ã´ã‚‰ã†ã©ã‚“", hours: "11:00â€“15:00", mapUrl: null },
                    { name: "å¯Œç”°å±‹", hours: "11:00â€“21:30", mapUrl: null },
                    { name: "Seafood Kawasaki", hours: "11:00â€“13:30" },
                    { name: "å±±æµ·å±‹", hours: "11:00â€“22:00", mapUrl: null },
                  ] 
                },
                { area: "å®®æ´¥æ™šé¤", spots: [{ name: "ãŠé£Ÿäº‹å‡¦ å‰²çƒ¹ãŸã‚“ã”", hours: "17:30â€“22:30" }] }
              ]
            },
            {
              date: "1/1ï¼ˆå››ï¼‰",
              routes: [
                {
                  area: "å¿ƒé½‹æ©‹",
                  spots: [
                    { name: "å¯¶å¯å¤¢ä¸­å¿ƒ å¤§é˜ªåº— DXå¤§ä¸¸å¿ƒé½‹æ©‹9F", hours: "10:00â€“20:00", mapUrl: null },
                    { name: "CHIIKAWA LAND Shinsaibashi PARCO Store 6F", hours: "10:00â€“20:00" }
                  ]
                },
                {
                  area: "æ¢…ç”°",
                  spots: [
                    { name: "å¯¶å¯å¤¢ä¸­å¿ƒ å¤§é˜ªå¤§ä¸¸æ¢…ç”°13F", hours: "10:00â€“20:00" },
                    { name: "ã¡ã„ã‹ã‚ã‚‰ã‚“ã© å¤§é˜ªæ¢…ç”°åº—", hours: "10:00â€“20:00", note: "æš«å®šé˜ªæ€¥ä¸‰ç•ªè¡—å—é¤¨B1 37è™Ÿ" },
                    { name: "ã‚‰ãéºº é´¨ã¨è‘± æ¢…ç”°åº—", hours: "11:00â€“23:00" },
                    { name: "æ¢…ç”°è—å¤©å¤§æ¨“", hours: "09:30â€“22:00" },
                    { name: "HEP FIVE æ‘©å¤©è¼ª7F", hours: "11:00â€“22:45" }
                  ]
                }
              ]
            }
          ],
          mapLinks: [
            { title: "é—œè¥¿å‘¨éŠè·¯ç·šåœ–", url: "https://www.surutto.com/kansai_rw/assets/pdf/areamap2024_tw.pdf" },
            { title: "Osaka Metroè·¯ç·šåœ–", url: "https://subway.osakametro.co.jp/img/osakametro_rosenzu_20250404.pdf" },
            { title: "é˜ªæ€¥é›»éµ", url: "https://www.hankyu.co.jp/station/pdf/zh-tw/map_station_zh-tw.pdf" },
            { title: "é˜ªç¥é›»éµ", url: "https://www.hanshin.co.jp/global/tw/pdf/map.pdf" },
            { title: "ãƒãƒ³ãƒ›ãƒ¼ãƒ«ã‚«ãƒ¼ãƒ‰å®˜ç¶²", url: "https://www.gk-p.jp/mhcard/" },
            { title: "ãƒãƒ³ãƒ›ãƒ¼ãƒ«ã‚«ãƒ¼ãƒ‰åœ°åœ–", url: "https://ekikaramanhole.whitebeach.org/ext/manholecard/map/?t=map" },
            { title: "ç´€å¿µå¹£åœ°åœ–", url: "https://www.stampmedal.com/map.htm" }
          ]
        };

        // --- 4. è¼”åŠ©å‡½å¼èˆ‡çµ„ä»¶ ---
        const getGoogleMapUrl = (name) => `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(name)}`;

        const WeatherIcon = ({ type }) => {
          switch (type) {
            case 'sunny': return <Icons.Sun className="w-5 h-5 text-orange-500" />;
            case 'cloudy': return <Icons.Cloud className="w-5 h-5 text-gray-500" />;
            case 'rain': return <Icons.CloudRain className="w-5 h-5 text-blue-500" />;
            case 'snow': return <Icons.Snowflake className="w-5 h-5 text-cyan-400" />;
            default: return <Icons.Sun className="w-5 h-5 text-orange-500" />;
          }
        };

        const Tag = ({ text, color }) => (
          <span className={`text-[10px] px-2 py-0.5 rounded-full border ${color} font-medium mr-2`}>
            {text}
          </span>
        );

        const Card = ({ children, className = "" }) => (
          <div className={`bg-white rounded-xl shadow-sm border border-stone-200 overflow-hidden ${className}`}>
            {children}
          </div>
        );

        // --- 5. è¡Œç¨‹é …ç›®çµ„ä»¶ ---
        const ItineraryItem = ({ item }) => {
          let Icon = Icons.MapPin;
          let iconColor = "text-stone-400";
          let borderColor = "border-stone-200";

          if (item.type === 'food') { Icon = Icons.Utensils; iconColor = "text-red-400"; borderColor="border-l-red-400"; }
          else if (item.type === 'shop') { Icon = Icons.ShoppingBag; iconColor = "text-yellow-500"; borderColor="border-l-yellow-500"; }
          else if (item.type === 'visit') { Icon = Icons.Camera; iconColor = "text-emerald-500"; borderColor="border-l-emerald-500"; }
          else if (item.type === 'hotel') { Icon = Icons.Hotel; iconColor = "text-purple-400"; borderColor="border-l-purple-400"; }
          
          else if (item.type === 'transport') {
            const isFlight = item.title.includes("CX564") || item.title.includes("CX565");
            const isCarRelated = item.title.includes("ç§Ÿè»Š") || item.title.includes("é‚„è»Š") || item.title.includes("é§è»Šå ´");
            
            if (isFlight) {
              Icon = Icons.Plane; 
              iconColor = "text-red-500"; 
              borderColor = "border-l-red-500";
            } else if (isCarRelated) {
              Icon = Icons.Car; 
              iconColor = "text-lime-600";
              borderColor = "border-l-lime-600";
            } else { 
              Icon = Icons.Train; 
              iconColor = "text-indigo-400";
              borderColor = "border-l-indigo-400";
            }
          }

          const isCollection = item.tag === "æ”¶é›†";
          if (isCollection) {
            Icon = Icons.Star; 
            iconColor = "text-amber-500";
            borderColor = "border-l-amber-500";
          }

          const titlesWithoutNavigation = ["æ­ä¹˜ CX564 é£›å¾€å¤§é˜ª", "æ­ä¹˜ CX565 è¿”å°", "å‰å¾€è‰æ´¥", "å‰å¾€å¤§é˜ª"];
          const showNavigation = !titlesWithoutNavigation.includes(item.title) && item.mapUrl !== null;
          const googleMapUrl = getGoogleMapUrl(item.title);
          const destinationUrl = item.mapUrl || googleMapUrl; 

          return (
            <div className={`flex gap-4 p-4 bg-white rounded-lg border-l-4 shadow-sm mb-3 ${borderColor}`}>
              <div className="flex flex-col items-center min-w-[50px]">
                <span className="text-sm font-bold text-stone-600 font-mono">{item.time}</span>
                <div className={`mt-2 p-1.5 rounded-full bg-stone-50 ${iconColor}`}>
                  <Icon size={18} />
                </div>
                {isCollection && <span className="text-[9px] text-amber-600 font-bold mt-1">GET!</span>}
              </div>
              
              <div className="flex-1">
                <div className="flex items-start justify-between">
                  <h3 className="font-bold text-stone-800 text-lg leading-tight w-[calc(100%-70px)] sm:w-[calc(100%-110px)]">{item.title}</h3>
                  <div className="flex gap-2 shrink-0"> 
                    {item.parkingUrl && (
                      <a href={item.parkingUrl} target="_blank" rel="noopener noreferrer" className="p-1.5 bg-sky-50 text-sky-600 rounded-full hover:bg-sky-100 transition-colors shrink-0">
                        <Icons.MapPin size={16} />
                      </a>
                    )}
                    {showNavigation ? (
                      <a href={destinationUrl} target="_blank" rel="noopener noreferrer" className="p-1.5 bg-blue-50 text-blue-600 rounded-full hover:bg-blue-100 transition-colors shrink-0">
                        <Icons.Navigation size={16} />
                      </a>
                    ) : (
                      <div className="w-7 h-7 shrink-0"></div> 
                    )}
                  </div>
                </div>

                {item.tag && <div className="mt-1"><Tag text={item.tag} color={isCollection ? "border-amber-400 text-amber-600 bg-amber-50" : "border-stone-300 text-stone-500"} /></div>}
                {item.highlight && <div className="mt-2 inline-block px-3 py-1 bg-red-50 text-red-600 text-xs rounded-md font-bold">â˜… {item.highlight}</div>}
                {item.note && <p className="mt-2 text-sm text-stone-500 leading-relaxed bg-stone-50 p-2 rounded border border-stone-100">{item.note}</p>}
              </div>
            </div>
          );
        };

        // --- 6. åº«å­˜æŸ¥è©¢çµ„ä»¶ ---
        const ManholeStockStatus = ({ stockData }) => (
          <div className="animate-fade-in space-y-4">
            <h2 className="text-xl font-bold text-stone-800 px-1 flex items-center gap-2"><Icons.CreditCard size={24} className="text-amber-500" />ãƒãƒ³ãƒ›ãƒ¼ãƒ«ã‚«ãƒ¼ãƒ‰ åœ¨åº«çŠ¶æ³</h2>
            <p className="text-sm text-stone-600 bg-indigo-50 p-3 rounded-lg border border-indigo-100 flex items-center gap-2"><Icons.Info size={16} className="text-indigo-600 shrink-0"/>ç‡Ÿæ¥­æ™‚é–“ç‚ºå®˜æ–¹æä¾›ä¹‹è³‡è¨Šï¼Œè«‹å‹™å¿…å†é»æ“Šé€£çµè‡³å®˜æ–¹ç¶²ç«™ç¢ºèªã€‚</p>
            <Card className="p-0">
                <div className="overflow-x-auto">
                    <table className="min-w-full divide-y divide-stone-200">
                        <thead className="bg-stone-50 sticky top-0">
                           <tr>
                                <th className="px-4 py-3 text-left text-xs font-semibold text-stone-600 uppercase tracking-wider w-1/4">åœ°å€</th>
                                <th className="px-4 py-3 text-left text-xs font-semibold text-stone-600 uppercase tracking-wider w-1/2">åœ°é» (é»æ“ŠæŸ¥è©¢åº«å­˜)</th>
                                <th className="px-4 py-3 text-left text-xs font-semibold text-stone-600 uppercase tracking-wider w-1/4">ç‡Ÿæ¥­æ™‚é–“</th>
                            </tr>
                        </thead>
                        <tbody className="bg-white divide-y divide-stone-100">
                            {stockData.map((item, index) => (
                                <tr key={index} className="hover:bg-indigo-50/50 transition-colors">
                                    <td className="px-4 py-3 whitespace-nowrap text-sm font-medium text-stone-900">{item.region}</td>
                                    <td className="px-4 py-3">
                                        <a href={item.url} target="_blank" rel="noopener noreferrer" className={`text-sm font-bold block ${item.highlight ? 'text-red-600 hover:text-red-800' : 'text-indigo-600 hover:text-indigo-800'}`}>{item.name}</a>
                                    </td>
                                    <td className="px-4 py-3 whitespace-nowrap text-xs"><span className="text-emerald-600 font-bold">{item.hours}</span></td>
                                </tr>
                            ))}
                        </tbody>
                    </table>
                </div>
            </Card>
          </div>
        );

        const NavButton = ({ name, url }) => (
          <a href={url || getGoogleMapUrl(name)} target="_blank" rel="noopener noreferrer" className="p-1.5 bg-blue-50 text-blue-600 rounded-full hover:bg-blue-100 transition-colors shrink-0"><Icons.Navigation size={14} /></a>
        );

        const MapView = ({ mapLinks }) => (
          <div className="space-y-4 animate-fade-in">
             <h2 className="text-xl font-bold text-stone-800 px-1 flex items-center gap-2"><Icons.Map size={24} className="text-emerald-600" />åœ°åœ–èˆ‡ç›¸é—œé€£çµ</h2>
            <div className="space-y-3">
              {mapLinks.map((link, idx) => (
                  <a key={idx} href={link.url} target="_blank" rel="noopener noreferrer" className="flex items-center justify-between p-4 bg-white border border-stone-200 rounded-xl shadow-sm hover:bg-emerald-50 transition-colors group">
                      <div className="flex items-center gap-3"><div className="p-2 bg-emerald-100 text-emerald-600 rounded-full"><Icons.Map size={20} /></div><span className="font-bold text-stone-700 text-lg">{link.title}</span></div>
                      <Icons.ExternalLink size={18} className="text-stone-400 group-hover:text-emerald-600" />
                  </a>
              ))}
            </div>
            <div className="h-10"></div>
          </div>
        );

        const NotesView = ({ notes }) => (
          <div className="space-y-6 animate-fade-in">
            <h2 className="text-xl font-bold text-stone-800 px-1 flex items-center gap-2"><Icons.NotebookPen size={24} className="text-pink-500" />è¡Œç¨‹å‚™è¨»</h2>
            {notes.map((day, idx) => (
              <Card key={idx} className="p-0 border-l-4 border-l-pink-400">
                <div className="bg-stone-50 px-4 py-2 border-b border-stone-100 flex justify-between items-center"><h3 className="font-bold text-stone-800">{day.date}</h3></div>
                <div className="p-4 space-y-4">
                  {day.links && (
                    <div className="space-y-2">
                      {day.links.map((link, i) => (
                        <a key={i} href={link.url} target="_blank" rel="noopener noreferrer" className="flex items-center justify-between p-3 bg-white border border-indigo-100 rounded-lg shadow-sm hover:bg-indigo-50 transition-colors group">
                          <div className="flex flex-col"><span className="text-indigo-700 font-bold flex items-center gap-2">{link.title}<Icons.ExternalLink size={14} className="opacity-50 group-hover:opacity-100" /></span>{link.note && <span className="text-xs text-stone-500 mt-0.5">{link.note}</span>}</div>
                        </a>
                      ))}
                    </div>
                  )}
                  {day.dining && (
                    <div className="bg-orange-50/50 rounded-lg p-3 border border-orange-100">
                      <h4 className="text-xs font-bold text-orange-600 mb-2 uppercase tracking-wide flex items-center gap-1"><Icons.Utensils size={12} /> é¤é£²è³‡è¨Š</h4>
                      {day.dining[0].name && (
                        <ul className="space-y-2">
                          {day.dining.map((spot, i) => (
                            <li key={i} className="flex justify-between items-center text-sm">
                              <div className="flex flex-col"><span className="font-bold text-stone-700">{spot.name}</span><span className="text-xs font-mono text-stone-500 bg-white px-1.5 py-0.5 rounded border border-orange-100 w-fit mt-0.5">{spot.hours}</span>{spot.note && <span className="text-[10px] text-orange-600 mt-0.5">{spot.note}</span>}</div>
                              <NavButton name={spot.name} url={spot.mapUrl} />
                            </li>
                          ))}
                        </ul>
                      )}
                      {day.dining[0].area && (
                        <div className="space-y-3">
                          {day.dining.map((areaGroup, i) => (
                            <div key={i}>
                              <div className="text-xs font-bold text-stone-500 mb-1 border-b border-orange-200 inline-block">{areaGroup.area}</div>
                              <ul className="space-y-2 pl-2">
                                 {areaGroup.spots.map((spot, j) => (
                                   <li key={j} className="flex justify-between items-center text-sm">
                                     <div className="flex flex-col"><span className="text-stone-700 font-medium">{spot.name}</span><span className="text-[10px] font-mono text-stone-500">{spot.hours}</span>{spot.note && <span className="text-[10px] text-orange-600 mt-0.5">{spot.note}</span>}</div>
                                     <NavButton name={spot.name} url={spot.mapUrl} />
                                   </li>
                                 ))}
                              </ul>
                            </div>
                          ))}
                        </div>
                      )}
                    </div>
                  )}
                  {day.routes && (
                    <div className="space-y-4">
                       {day.routes.map((route, i) => (
                         <div key={i} className="bg-sky-50 rounded-lg p-3 border border-sky-100">
                           <h4 className="font-bold text-sky-800 mb-2 flex items-center gap-2"><Icons.MapPin size={14} /> {route.area}</h4>
                           <ul className="space-y-2 relative pl-4 border-l-2 border-sky-200 ml-1">
                             {route.spots.map((spot, j) => (
                               <li key={j} className="relative flex justify-between items-start">
                                 <div className="absolute -left-[21px] top-1.5 w-2 h-2 rounded-full bg-sky-300"></div>
                                 <div className="flex-1 pr-2"><div className="text-sm font-bold text-stone-700">{spot.name}</div><div className="text-[10px] text-stone-500 font-mono">{spot.hours}</div>{spot.note && <div className="text-[10px] text-amber-600 mt-0.5">{spot.note}</div>}</div>
                                 <NavButton name={spot.name} url={spot.mapUrl} />
                               </li>
                             ))}
                           </ul>
                         </div>
                       ))}
                    </div>
                  )}
                </div>
              </Card>
            ))}
          </div>
        );

        // --- 7. ä¸»ç¨‹å¼ ---
        function App() {
          const [activeTab, setActiveTab] = useState('itinerary');
          const [selectedDayId, setSelectedDayId] = useState('day1');
          const scrollContainerRef = useRef(null);
          const lastChangeSource = useRef('init');
          const currentDayData = TRIP_DATA.itinerary.find(d => d.id === selectedDayId);

          useEffect(() => {
            if (lastChangeSource.current === 'scroll') return;
            if (scrollContainerRef.current) {
              const selectedBtn = scrollContainerRef.current.querySelector(`[data-day="${selectedDayId}"]`);
              if (selectedBtn) selectedBtn.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
            }
          }, [selectedDayId]);
          
          const handleScroll = () => {
            if (!scrollContainerRef.current) return;
            const container = scrollContainerRef.current;
            const containerCenter = container.scrollLeft + container.clientWidth / 2;
            let closestDayId = null;
            let minDiff = Infinity;
            Array.from(container.children).forEach((child) => {
              if (!child.dataset.day) return;
              const childCenter = child.offsetLeft + child.offsetWidth / 2;
              const diff = Math.abs(childCenter - containerCenter);
              if (diff < minDiff) { minDiff = diff; closestDayId = child.dataset.day; }
            });
            if (closestDayId && closestDayId !== selectedDayId) {
              lastChangeSource.current = 'scroll';
              setSelectedDayId(closestDayId);
            }
          };

          useEffect(() => { window.scrollTo({ top: 0, behavior: 'smooth' }); }, [activeTab, selectedDayId]);

          return (
            <div className="bg-stone-100 min-h-screen pb-20 font-sans text-stone-900 md:max-w-md md:mx-auto shadow-2xl overflow-hidden relative">
              <div className="sticky top-0 z-50 bg-white/95 backdrop-blur-md border-b border-stone-200 shadow-sm">
                <div className="px-4 py-3 flex justify-between items-center">
                  <div><h1 className="text-xl font-black tracking-tighter text-indigo-900">KANSAI TRIP</h1><p className="text-xs text-stone-400 font-medium tracking-widest">DEC 27 - JAN 04</p></div>
                  {activeTab === 'itinerary' && currentDayData && (
                    <div className="flex items-center gap-2 bg-stone-100 px-3 py-1.5 rounded-full"><WeatherIcon type={currentDayData.weather} /><span className="text-sm font-bold text-stone-600">{currentDayData.temp}</span><span className="text-xs text-stone-400 pl-1 border-l border-stone-300 ml-1">{currentDayData.location}</span></div>
                  )}
                </div>
                {activeTab === 'itinerary' && (
                  <div ref={scrollContainerRef} onScroll={handleScroll} className="flex overflow-x-auto gap-3 px-4 pb-3 no-scrollbar snap-x">
                    {TRIP_DATA.itinerary.map((day) => (
                      <button key={day.id} data-day={day.id} onClick={() => { lastChangeSource.current = 'click'; setSelectedDayId(day.id); }} className={`flex-shrink-0 snap-center flex flex-col items-center justify-center w-14 h-16 rounded-xl border transition-all duration-300 ${selectedDayId === day.id ? "bg-indigo-600 border-indigo-600 text-white shadow-lg shadow-indigo-200 scale-105" : "bg-white border-stone-200 text-stone-400 hover:border-indigo-300"}`}><span className="text-[10px] font-medium uppercase leading-none mb-1">{day.date}</span><span className="text-lg font-black leading-none">{day.dayOfWeek}</span></button>
                    ))}
                  </div>
                )}
              </div>

              <div className="p-4 space-y-4 min-h-[calc(100vh-180px)]">
                {activeTab === 'itinerary' && currentDayData && (
                  <div className="animate-fade-in-up">
                    <div className="flex items-center justify-between mb-4 px-1"><h2 className="text-lg font-bold text-stone-700">Day {selectedDayId.replace('day', '')} <span className="ml-2 text-sm font-normal text-stone-500">{currentDayData.location}</span></h2></div>
                    {currentDayData.items.map((item, index) => <ItineraryItem key={index} item={item} />)}<div className="h-10"></div> 
                  </div>
                )}
                {activeTab === 'flights' && (
                  <div className="space-y-4 animate-fade-in"><h2 className="text-xl font-bold text-stone-800 px-1">èˆªç­è³‡è¨Š</h2>
                     {TRIP_DATA.flights.map((flight, idx) => (
                       <Card key={idx} className="p-5">
                         <div className="flex items-center justify-between mb-4 border-b border-stone-100 pb-3"><span className={`text-xs font-bold px-2 py-1 rounded ${flight.type === 'Departure' ? 'bg-indigo-100 text-indigo-700' : 'bg-orange-100 text-orange-700'}`}>{flight.type === 'Departure' ? 'å»ç¨‹' : 'å›ç¨‹'}</span><span className="font-mono font-bold text-stone-500">{flight.date}</span></div>
                         <div className="flex justify-between items-center mb-2"><div className="text-3xl font-black text-stone-800">{flight.code}</div><Icons.Plane className="text-stone-300 rotate-45" /></div>
                         <div className="text-sm font-medium text-stone-600 mb-4">{flight.airline} â€¢ {flight.class}</div>
                         <div className="bg-stone-50 p-4 rounded-lg text-center border border-stone-100"><div className="text-lg font-bold text-stone-800 mb-1">{flight.route}</div><div className="text-xs text-stone-500">{flight.terminal} â€¢ {flight.duration} â€¢ {flight.aircraft}</div></div>
                       </Card>
                     ))}
                  </div>
                )}
                {activeTab === 'hotels' && (
                  <div className="space-y-4 animate-fade-in"><h2 className="text-xl font-bold text-stone-800 px-1">ä½å®¿è³‡è¨Š</h2>
                    {TRIP_DATA.hotels.map((hotel, idx) => (
                      <Card key={idx} className="p-0">
                        <div className="h-24 bg-gradient-to-r from-stone-200 to-stone-300 flex items-center justify-center"><Icons.Hotel className="text-white w-10 h-10 opacity-50" /></div>
                        <div className="p-5">
                          <div className="flex justify-between items-start mb-2"><h3 className="text-lg font-bold text-stone-800 leading-tight w-3/4">{hotel.name}</h3><span className="text-xs bg-stone-100 text-stone-600 px-2 py-1 rounded font-medium whitespace-nowrap">{hotel.dates}</span></div>
                          <p className="text-xs text-stone-400 mb-4 font-mono">{hotel.engName}</p>
                          <div className="flex items-start gap-2 mb-4 text-sm text-stone-600"><Icons.MapPin size={16} className="mt-0.5 text-stone-400 shrink-0" /><span>{hotel.location}</span></div>
                          <div className="flex flex-wrap gap-2 mb-4">{hotel.features.map((f, i) => <span key={i} className="text-[10px] px-2 py-1 bg-indigo-50 text-indigo-600 rounded">{f}</span>)}</div>
                          <div className="bg-amber-50 p-3 rounded text-xs text-amber-800 border border-amber-100 flex gap-2"><Icons.Info size={14} className="shrink-0 mt-0.5" />{hotel.note}</div>
                          <a href={getGoogleMapUrl(hotel.name)} target="_blank" className="mt-4 block w-full py-2 bg-stone-800 text-white text-center rounded-lg text-sm font-bold hover:bg-stone-700 transition">å°èˆªè‡³é£¯åº—</a>
                        </div>
                      </Card>
                    ))}
                  </div>
                )}
                {activeTab === 'manhole' && <ManholeStockStatus stockData={TRIP_DATA.manholeStock} />}
                {activeTab === 'map' && <MapView mapLinks={TRIP_DATA.mapLinks} />}
                {activeTab === 'notes' && <NotesView notes={TRIP_DATA.notes} />}
              </div>

              <div className="fixed bottom-0 left-0 right-0 bg-white border-t border-stone-200 md:max-w-md md:mx-auto pb-safe safe-area-bottom z-50">
                <div className="flex justify-around items-center h-16">
                  <button onClick={() => setActiveTab('itinerary')} className={`flex flex-col items-center justify-center flex-1 h-full space-y-1 transition-colors ${activeTab === 'itinerary' ? 'text-indigo-600' : 'text-stone-400'}`}><Icons.Calendar size={20} strokeWidth={activeTab === 'itinerary' ? 2.5 : 2} /><span className="text-[10px] font-medium">è¡Œç¨‹</span></button>
                  <button onClick={() => setActiveTab('flights')} className={`flex flex-col items-center justify-center flex-1 h-full space-y-1 transition-colors ${activeTab === 'flights' ? 'text-indigo-600' : 'text-stone-400'}`}><Icons.Plane size={20} strokeWidth={activeTab === 'flights' ? 2.5 : 2} /><span className="text-[10px] font-medium">èˆªç­</span></button>
                  <button onClick={() => setActiveTab('hotels')} className={`flex flex-col items-center justify-center flex-1 h-full space-y-1 transition-colors ${activeTab === 'hotels' ? 'text-indigo-600' : 'text-stone-400'}`}><Icons.Hotel size={20} strokeWidth={activeTab === 'hotels' ? 2.5 : 2} /><span className="text-[10px] font-medium">é£¯åº—</span></button>
                  <button onClick={() => setActiveTab('manhole')} className={`flex flex-col items-center justify-center flex-1 h-full space-y-1 transition-colors ${activeTab === 'manhole' ? 'text-indigo-600' : 'text-stone-400'}`}><Icons.CreditCard size={20} strokeWidth={activeTab === 'manhole' ? 2.5 : 2} /><span className="text-[10px] font-medium whitespace-nowrap scale-90">åœ¨åº«ç‹€æ³</span></button>
                  <button onClick={() => setActiveTab('map')} className={`flex flex-col items-center justify-center flex-1 h-full space-y-1 transition-colors ${activeTab === 'map' ? 'text-emerald-600' : 'text-stone-400'}`}><Icons.Map size={20} strokeWidth={activeTab === 'map' ? 2.5 : 2} /><span className="text-[10px] font-medium">è³‡è¨Š</span></button>
                  <button onClick={() => setActiveTab('notes')} className={`flex flex-col items-center justify-center flex-1 h-full space-y-1 transition-colors ${activeTab === 'notes' ? 'text-pink-600' : 'text-stone-400'}`}><Icons.NotebookPen size={20} strokeWidth={activeTab === 'notes' ? 2.5 : 2} /><span className="text-[10px] font-medium">å‚™è¨»</span></button>
                </div>
              </div>
            </div>
          );
        }

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
