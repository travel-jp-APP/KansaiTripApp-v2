<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kansai Trip 2025-2026</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
        "lucide-react": "https://esm.sh/lucide-react@0.292.0"
      }
    }
    </script>

    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body {
            background-color: #f5f5f4; /* stone-100 */
        }
        /* Hide scrollbar */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeInUp 0.4s ease-out forwards;
        }
        .animate-fade-in-up {
            animation: fadeInUp 0.4s ease-out forwards;
        }
        .pb-safe {
            padding-bottom: env(safe-area-inset-bottom);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import React, { useState, useEffect, useRef } from 'react';
        import { createRoot } from 'react-dom/client';
        import { 
            MapPin, Navigation, Utensils, Train, Sun, CloudRain, Cloud, Snowflake, 
            Info, ShoppingBag, Calendar, Plane, Hotel, Camera, Star, RefreshCw, 
            CreditCard, Car, NotebookPen, ExternalLink 
        } from 'lucide-react';

        // --- Data Structure ---
        const TRIP_DATA = {
            flights: [
                {
                    type: "Departure",
                    date: "2025/12/27 (ÂÖ≠)",
                    code: "CX564",
                    airline: "ÂúãÊ≥∞Ëà™Á©∫",
                    route: "TPE Âè∞Âåó (11:15) ‚ûî KIX Â§ßÈò™ (14:55)",
                    terminal: "TPE T1 / KIX T1",
                    duration: "2h 40m",
                    aircraft: "Airbus A330-300",
                    class: "Á∂ìÊøü Q"
                },
                {
                    type: "Return",
                    date: "2026/01/04 (Êó•)",
                    code: "CX565",
                    airline: "ÂúãÊ≥∞Ëà™Á©∫",
                    route: "KIX Â§ßÈò™ (16:15) ‚ûî TPE Âè∞Âåó (18:30)",
                    terminal: "KIX T1 / TPE T1",
                    duration: "3h 25m",
                    aircraft: "Airbus A330-300",
                    class: "Á∂ìÊøü S"
                }
            ],
            hotels: [
                {
                    name: "ËçâÊ¥•Ê≥¢Â£´È†ìÂª£Â†¥È£ØÂ∫ó",
                    engName: "Hotel Boston Plaza Kusatsu",
                    dates: "12/27 - 1/1 (5Êôö)",
                    location: "ÊªãË≥ÄÁ∏£ËçâÊ¥•Â∏Ç (JRËçâÊ¥•Á´ôÊóÅ)",
                    features: ["‰∫§ÈÄö‰æøÂà©", "ÁæéÂºèÈ¢®Ê†º", "ÈÅ©ÂêàËá™Èßï"],
                    note: "‰ΩúÁÇ∫ÊªãË≥ÄÁ∏£‰∫∫Â≠îËìãÂç°Êî∂ÈõÜÁöÑÂü∫Âú∞ÈùûÂ∏∏ÂêàÈÅ©„ÄÇ"
                },
                {
                    name: "REF ‰∫¨ÈÉΩÂÖ´Ê¢ùÂè£ by VESSEL HOTELS",
                    engName: "REF Kyoto Hachijoguchi",
                    dates: "1/1 - 1/4 (3Êôö)",
                    location: "‰∫¨ÈÉΩÂ∏ÇÂçóÂçÄ (‰∫¨ÈÉΩÁ´ôÂÖ´Ê¢ùÂè£)",
                    features: ["Â§ßÊµ¥Â†¥", "Áèæ‰ª£Êó•Âºè", "ÂÖçË≤ªËøéË≥ìÈ£≤Êñô"],
                    note: "Èù†Ëøë‰∫¨ÈÉΩËªäÁ´ôÔºåÊñπ‰æøÂâçÂæÄÁ•ûÊà∂„ÄÅÂ•àËâØËàáÂõûÁ®ãÊ©üÂ†¥„ÄÇ"
                }
            ],
            itinerary: [
                {
                    id: "day1",
                    date: "12/27",
                    dayOfWeek: "ÂÖ≠",
                    location: "Â§ßÈò™ ‚ûî ÊªãË≥Ä",
                    weather: "sunny",
                    temp: "8¬∞C",
                    items: [
                        { type: "transport", time: "11:15", title: "Êê≠‰πò CX564 È£õÂæÄÂ§ßÈò™", note: "È†êË®à 14:55 ÊäµÈÅîÈóúË•øÊ©üÂ†¥ T1" },
                        { type: "visit", time: "15:30", title: "Ëá®Á©∫ÂüéËßÄÂÖâÊ°àÂÖßÊâÄ", tag: "Êî∂ÈõÜ", note: "üî• È†òÂèñ‰∫∫Â≠îËìãÂç°/Á¥ÄÂøµÂìÅ„ÄÇÁáüÊ•≠Ëá≥20:00„ÄÇ", mapUrl: "https://goo.gl/maps/Search" },
                        { type: "shop", time: "16:00", title: "Ëá®Á©∫Âüé Outlet", highlight: "ÂøÖË≤∑: ÈÅãÂãïÂìÅÁâå„ÄÅÊó•Á≥ªÊúçÈ£æ", note: "ÊôöÈ§êÂèØÂú®Ê≠§Ëß£Ê±∫„ÄÇÁáüÊ•≠Ëá≥20:00„ÄÇ" },
                        { type: "transport", time: "19:00", title: "ÂâçÂæÄËçâÊ¥•", note: "ÈóúË•øÊ©üÂ†¥ ‚Üí ‰∫¨ÈÉΩËªäÁ´ô ‚Üí ËçâÊ¥•ËªäÁ´ô" },
                        { type: "hotel", time: "21:30", title: "ÂÖ•‰ΩèÔºöËçâÊ¥•Ê≥¢Â£´È†ìÂª£Â†¥È£ØÂ∫ó", note: "‰ΩçÊñºËçâÊ¥•Á´ôË•øÂè£Ôºå‰ºëÊÅØÊ∫ñÂÇôÊòéÊó•Ëá™Èßï„ÄÇ" }
                    ]
                },
                {
                    id: "day2",
                    date: "12/28",
                    dayOfWeek: "Êó•",
                    location: "ÊªãË≥ÄËá™Èßï",
                    weather: "cloudy",
                    temp: "6¬∞C",
                    items: [
                        { type: "transport", time: "08:00", title: "ÁßüËªäÔºöToyota Rent a Car", note: "ËçâÊ¥•Á´ôË•øÂè£Â∫óÂèñËªä„ÄÇ", mapUrl: "https://goo.gl/maps/Search" },
                        { 
                            type: "visit", 
                            time: "09:40", 
                            title: "Kusatsu Yume-Honjin", 
                            tag: "Êî∂ÈõÜ", 
                            note: "„Åè„Åï„Å§Â§¢Êú¨Èô£ÔºåÈ†òÂèñ‰∫∫Â≠îËìãÂç°„ÄÇ09:30ÈñãÈñÄ„ÄÇ",
                            parkingUrl: "https://goo.gl/maps/Search"
                        },
                        { type: "visit", time: "10:20", title: "Ê†óÊù±Ë¶≥ÂÖâÊ°àÂÜÖÊâÄ (2F)", tag: "Êî∂ÈõÜ", note: "‰ΩçÊñºÊâãÂéüÁ´ô„ÄÇÊ≥®ÊÑèÁáüÊ•≠ÊôÇÈñìËá≥12:00 (ÈÄöÂ∏∏ÂÅáÊó•ÂèØËÉΩÊúâËÆäÂãïÔºåË´ãÂÑ™ÂÖàÂâçÂæÄ)„ÄÇ" },
                        { type: "visit", time: "11:00", title: "ÂÆàÂ±±Â∏ÇÈßÖÂâçÁ∑èÂêàÊ°àÂÜÖÊâÄ", tag: "Êî∂ÈõÜ", note: "‰ΩçÊñºÂÆàÂ±±Á´ô„ÄÇ07:30Êó©Èñã„ÄÇ" },
                        { type: "visit", time: "12:00", title: "ÂÖ´Êó•Â∏ÇÈßÖÂâçË¶≥ÂÖâ‰∫§ÊµÅÊñΩË®≠", tag: "Êî∂ÈõÜ", note: "Êù±ËøëÊ±üÂ∏ÇÁöÑÂ§ßÈ¢®ÁÆèÂçöÁâ©È§®ÈôÑËøë„ÄÇ" },
                        { type: "visit", time: "13:00", title: "Êù±ËøëÊ±üÂ∏ÇÂΩπÊâÄ ÂÆàË°õÂÆ§", tag: "Êî∂ÈõÜ", note: "ÁáüÊ•≠ÊôÇÈñì (10:00‚Äì16:00)„ÄÇË´ãÁ¢∫Ë™çÂÆàË°õÂÆ§‰ΩçÁΩÆ„ÄÇ", mapUrl: "https://goo.gl/maps/Search" },
                        { type: "visit", time: "14:00", title: "ÂΩ•Ê†πÂ∏Ç‰∏ä‰∏ãÊ∞¥ÈÅì‰∏≠ÂøÉ", tag: "Êî∂ÈõÜ", note: "ÈúÄÂπ≥Êó•ÊàñÁâπÂÆöÂÅáÊó•Á™óÂè£ÔºåË´ãÁ¢∫Ë™çÂÆàË°õÂÆ§‰ΩçÁΩÆ„ÄÇ", mapUrl: "https://goo.gl/maps/Search" },
                        { type: "visit", time: "14:30", title: "Hikonyan Museum", highlight: "ÂøÖÁúã: ÂΩ•Ê†πË≤ì(Hikonyan)Ë°®ÊºîÂ†¥Ê¨°", note: "üî• ÂΩ•Ê†πË≤ìÂçöÁâ©È§®„ÄÇ", mapUrl: "https://goo.gl/maps/Search" },
                        { type: "visit", time: "15:30", title: "ÂΩ•Ê†πÂüé", highlight: "ÂúãÂØ∂‰∫îÂüé", note: "Ë≥ûÊ´ªÂêçÊâÄ(ÈõñÊòØÂÜ¨Â§©)„ÄÇ", mapUrl: "https://goo.gl/maps/Search" },
                        { type: "shop", time: "17:30", title: "MITSUI OUTLET PARK ÊªãË≥ÄÈæçÁéã", highlight: "ÈóúË•øÊúÄÂ§ßÁ¥ö Outlet", note: "ÊôöÈ§êÊé®Ëñ¶ËøëÊ±üÁâõÊñôÁêÜ„ÄÇ" }
                    ]
                },
                {
                    id: "day3",
                    date: "12/29",
                    dayOfWeek: "‰∏Ä",
                    location: "Êµ∑‰πã‰∫¨ÈÉΩ",
                    weather: "rain",
                    temp: "4¬∞C",
                    items: [
                        { type: "visit", time: "09:00", title: "‰ºäÊ†πÁÅ£Ë≥ûÊôØËßÄÂÖâËàπ", highlight: "ÂøÖÊãç: ËàüÂ±ãÁæ§", note: "Ë≥ºË≤∑Ëù¶Ê¢ùÈ§µÊµ∑È∑ó„ÄÇÈÅäË¶ΩÊôÇÈñìÁ¥Ñ25ÂàÜÈêò„ÄÇ" },
                        { type: "visit", time: "10:30", title: "ÈÅì„ÅÆÈßÖ Êµ∑„ÅÆ‰∫¨ÈÉΩ ÂÆÆÊ¥•", tag: "Êî∂ÈõÜ", note: "ÂÆÆÊ¥•ËßÄÂÖâÊ°àÂÖßÊâÄÈ†òÂèñ‰∫∫Â≠îËìãÂç°„ÄÇ" },
                        { type: "food", time: "12:00", title: "ÂçàÈ§êÔºöÂ§©Ê©ãÁ´ãÂë®ÈÇä", highlight: "ÂøÖÂêÉ: Ëõ§Ë†£‰∏º (Asari Don)", note: "Êé®Ëñ¶ÔºöÂØåÁî∞Â±ã (Êµ∑ÈÆÆË∂ÖÂÄº)„ÄÅSuginoya„ÄÅÊµ∑ÈÆÆÂ∑•Êàø„ÄÇ" },
                        { type: "visit", time: "13:30", title: "Â§©Ê©ãÁ´ã (ÂÇòÊùæÂÖ¨Âúí)", highlight: "Êó•Êú¨‰∏âÊôØ", note: "Êê≠‰πòÁ∫úËªä/ÂêäÊ§Ö‰∏äÂ±±ÔºåÂæûËÉØ‰∏ãÁ™∫Áúã„ÄåÈ£õÈæçÂú®Â§©„Äç„ÄÇ" },
                        { type: "visit", time: "15:00", title: "ÂÖÉ‰ºäÂã¢ Á±†Á•ûÁ§æ & Êô∫ÊÅ©ÂØ∫", note: "ÂèÉÊãúÂè§ËÄÅÁ•ûÁ§æ„ÄÇ" },
                        { type: "visit", time: "16:00", title: "Â§©Ê©ãÁ´ã View Land", note: "ÂæûÂè¶‰∏ÄÂÅ¥ÁúãÈ£õÈæçËßÄ„ÄÇÊ≥®ÊÑèÁ∫úËªäÊú´Áè≠ÊôÇÈñì (ÂÜ¨Â≠£Á¥Ñ16:30-17:00)„ÄÇ" }
                    ]
                },
                {
                    id: "day4",
                    date: "12/30",
                    dayOfWeek: "‰∫å",
                    location: "Èï∑Êø±/ÁêµÁê∂Êπñ",
                    weather: "cloudy",
                    temp: "5¬∞C",
                    items: [
                        { type: "visit", time: "08:50", title: "Á´πÁîüÂ≥∂ËßÄÂÖâËàπ", note: "ÂæûÈï∑Êø±Ê∏ØÂá∫Áôº„ÄÇÁ´πÁîüÂ≥∂ÊòØËÉΩÈáèÊôØÈªû (Power Spot)„ÄÇ" },
                        { type: "visit", time: "10:00", title: "Á´πÁîüÂ≥∂ ÂØ∂Âö¥ÂØ∫", highlight: "ÊäïÊì≤Áì¶ÁâáÁ•àÁ¶è", note: "ÂèÉÊãúÂºÅË≤°Â§©„ÄÇ" },
                        { type: "visit", time: "12:00", title: "ÈªëÂ£ÅÂª£Â†¥ (ÈªëÂ£ÅSquare)", highlight: "ÂøÖÂêÉ: 96Cafe ÈªëÂíñÂì©", note: "ÁéªÁíÉÂ∑•ËóùÂìÅÂ∫óÊûóÁ´ãÔºåÂÖÖÊªøÂ§ßÊ≠£Êµ™Êº´Ê∞õÂúç„ÄÇ" },
                        { type: "visit", time: "14:30", title: "Â§öË≥ÄÂ§ßÁ§æ", highlight: "Èï∑Â£ΩÁ•àÈ°ò", note: "ÊªãË≥ÄÁ∏£Á¨¨‰∏ÄÂ§ßÁ§æÔºåÈñÄÂè£ÊúâËëóÂêç„ÄåÁ≥∏ÂàáÈ§Ö„Äç„ÄÇ" },
                        { type: "visit", time: "16:00", title: "ËøëÊ±üÁ•ûÂÆÆ", highlight: "Ëä±ÁâåÊÉÖÁ∑£ËÅñÂú∞", note: "‰ª•Á´∂ÊäÄÊ≠åÁâåËÅûÂêçÔºåÂª∫ÁØâÊú±Á¥ÖÁæéÈ∫ó„ÄÇ" }
                    ]
                },
                {
                    id: "day5",
                    date: "12/31",
                    dayOfWeek: "‰∏â",
                    location: "ËøëÊ±üÂÖ´Âπ°",
                    weather: "snow",
                    temp: "3¬∞C",
                    items: [
                        { type: "transport", time: "08:00", title: "Êó•ÁâüÁ¶ÆÂÖ´Âπ°ÂÆÆÂâç ÁÑ°ÊñôÈßêËªäÂ†¥ÔºàÈáåÈÅìÔºâ", note: "Êñ∞Âπ¥ÂèÉÊãúÊàñÈÅäË¶ΩÂÖ´Âπ°Â†ÄÂâçÂÅúËªä„ÄÇ" },
                        { type: "visit", time: "09:00", title: "ÂÖ´Âπ°Â±±Á∫úËªä & ÂüéË∑°", note: "Áú∫ÊúõÁêµÁê∂ÊπñËàáË•ø‰πãÊπñÁæéÊôØ„ÄÇ", mapUrl: "https://goo.gl/maps/Search" },
                        { type: "visit", time: "10:30", title: "ÂÖ´Âπ°Â†ÄÈÅäËàπ", highlight: "ÊôÇ‰ª£ÂäáÂèñÊôØÂú∞", note: "Âú®ÂÖÖÊªøÈ¢®ÊÉÖÁöÑÊ∞¥ÈÑâ‰πòËàπÊº´ÈÅä„ÄÇ" },
                        { type: "visit", time: "12:30", title: "La Collina ËøëÊ±üÂÖ´Âπ°", highlight: "ÂøÖË≤∑: Club Harie Âπ¥Ëº™ËõãÁ≥ï", note: "Âª∫ÁØâÂ§ßÂ∏´Ëó§Ê£ÆÁÖß‰ø°Ë®≠Ë®àÁöÑÁ´•Ë©±ËçâÂ±ã„ÄÇÂøÖÂêÉÁèæÁÉ§Âπ¥Ëº™ËõãÁ≥ï„ÄÅÈäÖÈëºÁáí„ÄÇ" },
                        { type: "food", time: "17:00", title: "Ë∑®Âπ¥ÊôöÈ§ê", note: "Âª∫Ë≠∞ÊèêÂâçÈ†êË®ÇÈ§êÂª≥ÔºåÊàñÂú®Ë∂ÖÂ∏ÇË≥ºË≤∑Ë±êÁõõÊôöÈ§êÂõûÈ£ØÂ∫ó‰∫´Áî®„ÄÇ", mapUrl: null },
                        { type: "transport", time: "20:00", title: "ÈÇÑËªäÔºö„Éà„É®„Çø„É¨„É≥„Çø„É™„Éº„ÇπÊªãË≥Ä ËçâÊ¥•ÈßÖË•øÂè£Â∫ó", note: "ÂãôÂøÖÊñº 20:00 ÂâçÂÆåÊàêÈÇÑËªäÊâãÁ∫åÔºåÁµêÊùüËá™ÈßïË°åÁ®ã„ÄÇ", mapUrl: "https://goo.gl/maps/Search" }
                    ]
                },
                {
                    id: "day6",
                    date: "1/1",
                    dayOfWeek: "Âõõ",
                    location: "Á•ûÊà∂/ÂàùË©£",
                    weather: "sunny",
                    temp: "7¬∞C",
                    items: [
                        { type: "transport", time: "08:00", title: "ÁßªÂãïËá≥‰∫¨ÈÉΩ‰∏¶ÂâçÂæÄÁ•ûÊà∂", note: "ÂÖàÂéª REF ‰∫¨ÈÉΩÈ£ØÂ∫óÂØÑÊîæË°åÊùéÔºåÂÜçÊê≠Èò™ÊÄ•ÂâçÂæÄÁ•ûÊà∂‰∏âÂÆÆ„ÄÇ", mapUrl: "https://goo.gl/maps/Search" },
                        { type: "visit", time: "10:30", title: "ÁîüÁî∞Á•ûÁ§æ", highlight: "ÊàÄÊÑõÁµêÁ∑£", note: "Êñ∞Âπ¥ÂèÉÊãú (ÂàùË©£) ‰∫∫ÊΩÆÁúæÂ§öÔºåË´ãÈ†êÁïôÊôÇÈñì„ÄÇ", mapUrl: "https://goo.gl/maps/Search" },
                        { type: "visit", time: "12:00", title: "ÂåóÈáéÂ§©ÊªøÁ•ûÁ§æ", note: "‰ΩçÊñºÁï∞‰∫∫È§®ÂçÄÁöÑÈ´òÈªû„ÄÇ" },
                        { type: "visit", time: "14:00", title: "Á•ûÊà∂Ê©üÂ†¥ Á∂úÂêàÊ°àÂÖßÊâÄ", tag: "Êî∂ÈõÜ", note: "È†òÂèñ‰∫∫Â≠îËìãÂç°„ÄÇÊê≠‰πò Port Liner ÂâçÂæÄ„ÄÇ", mapUrl: "https://goo.gl/maps/Search" },
                        { type: "visit", time: "16:30", title: "Â§ßÈ≥•Â§ßÁ§æ", tag: "Êî∂ÈõÜ", note: "Â§ßÈò™Â†∫Â∏Ç„ÄÇÈ†ÜË∑ØÂèÉÊãú„ÄÇ", mapUrl: "https://goo.gl/maps/Search" },
                        { type: "shop", time: "18:30", title: "ÂØ∂ÂèØÂ§¢‰∏≠ÂøÉ Â§ßÈò™Â∫ó DXÂ§ß‰∏∏ÂøÉÈΩãÊ©ã9F", highlight: "ÂøÖË≤∑: ÈôêÂÆöÂïÜÂìÅ", note: "ÁáüÊ•≠ÊôÇÈñì10:00‚Äì20:00„ÄÇÊôöÈ§êÂèØÂú®Ê≠§ÈôÑËøëËß£Ê±∫„ÄÇ", mapUrl: "https://goo.gl/maps/Search" },
                        { type: "shop", time: "20:00", title: "ÂØ∂ÂèØÂ§¢‰∏≠ÂøÉ Â§ßÈò™Â§ß‰∏∏Ê¢ÖÁî∞13F", highlight: "ÂøÖË≤∑: ÈôêÂÆöÂïÜÂìÅ", note: "‚ö†Ô∏è ÁáüÊ•≠ÊôÇÈñì10:00‚Äì20:00„ÄÇË´ãÊ≥®ÊÑèÔºåÂøÉÈΩãÊ©ãËàáÊ¢ÖÁî∞ÂÖ©Â∫óÁöÜÊñº20:00ÈóúÈñÄÔºåÂª∫Ë≠∞ÈÅ∏ÊìáÂÖ∂‰∏ÄÊàñÊèêÂâçË™øÊï¥Ë°åÁ®ã„ÄÇ", mapUrl: "https://goo.gl/maps/Search" }
                    ]
                },
                {
                    id: "day7",
                    date: "1/2",
                    dayOfWeek: "‰∫î",
                    location: "Â•àËâØ/ÂÆáÊ≤ª",
                    weather: "sunny",
                    temp: "6¬∞C",
                    items: [
                        { type: "visit", time: "08:30", title: "Êò•Êó•Â§ßÁ§æ", highlight: "ÈπøËàáÁáàÁ±†", note: "ÂèÉÈÅì‰∏äÁöÑÈπøÁæ§ÂæàÂèØÊÑõ‰ΩÜË´ãÂ∞èÂøÉ‰ªôË≤ù„ÄÇ" },
                        { type: "food", time: "11:00", title: "Ê∞¥Ë∞∑Ëå∂Â±ã", highlight: "ËåÖËçâÂ±ãËå∂Â±ã", note: "ÊãçÁÖßË∂ÖÁæéÔºåÊé®Ëñ¶ÁÉèÈæçÈ∫µÊàñËï®È§Ö„ÄÇ" },
                        { type: "visit", time: "12:30", title: "Êù±Â§ßÂØ∫ & ‰∫åÊúàÂ†Ç", highlight: "‰∏ñÁïåÊúÄÂ§ßÊú®ÈÄ†Âª∫ÁØâ", note: "ÂøÖÁúãÂ§ß‰Ωõ„ÄÇ‰∫åÊúàÂ†ÇÂèØ‰øØÁû∞Â•àËâØÂ∏ÇÊôØ„ÄÇ" },
                        { type: "visit", time: "13:30", title: "Âæ°ÈúäÁ•ûÁ§æ", note: "Â•àËâØÂ∏ÇÂæ°ÈúäÁ•ûÁ§æ„ÄÇ", mapUrl: "https://goo.gl/maps/Search" },
                        { type: "visit", time: "14:30", title: "Â•àËâØÁî∫ÂçóË¶≥ÂÖâÊ°àÂÜÖÊâÄ", tag: "Êî∂ÈõÜ", note: "È†òÂèñÂ•àËâØ‰∫∫Â≠îËìãÂç°„ÄÇ" },
                        { type: "visit", time: "15:30", title: "ÂÆáÊ≤ªË¶≥ÂÖâ„Çª„É≥„Çø„Éº", tag: "Êî∂ÈõÜ", note: "È†òÂèñÂÆáÊ≤ª‰∫∫Â≠îËìãÂç°„ÄÇÈ†Ü‰æøÈÄõË°®ÂèÉÈÅì„ÄÇ" },
                        { type: "shop", time: "16:30", title: "Âêâ‰ºäÂç°Âìá (Chikawa) ‰ºèË¶ãÂ∫ó", highlight: "‰∫¨ÈÉΩÈôêÂÆö", note: "Mogumogu Êú¨Ëàñ„ÄÇÂøÖË≤∑‰ºèË¶ãÁ®ªËç∑ÈôêÂÆöÂë®ÈÇä„ÄÇ" }
                    ]
                },
                {
                    id: "day8",
                    date: "1/3",
                    dayOfWeek: "ÂÖ≠",
                    location: "‰∫¨ÈÉΩÂ∑°Á¶Æ",
                    weather: "cloudy",
                    temp: "5¬∞C",
                    items: [
                        { type: "visit", time: "08:30", title: "Â§©ÈæçÂØ∫ (ÂµêÂ±±)", highlight: "ÊõπÊ∫êÊ±†Â∫≠Âúí", note: "‰∏ñÁïåÈÅ∫Áî¢„ÄÇÊó©Êô®‰∫∫ËºÉÂ∞ëÔºåÁ©∫Ê∞£Ê∏ÖÊñ∞„ÄÇ" },
                        { 
                            type: "visit", 
                            time: "10:30", 
                            title: "Â∞ãÊâæÈ≥≥Áéã‰∫∫Â≠îËìã", 
                            tag: "Êî∂ÈõÜ", 
                            note: "ÂØ∂ÂèØÂ§¢‰∫∫Â≠îËìã„ÄéÈ≥≥Áéã„Äè‰ΩçÊñº‰∫¨ÈÉΩÔºàÈÄöÂ∏∏Âú®ÂÖ¨ÂúíÊàñÂú∞Ê®ôÂâçÔºâ„ÄÇ",
                            mapUrl: "https://goo.gl/maps/Search"
                        },
                        { type: "visit", time: "13:00", title: "‰ªÅÂíåÂØ∫", note: "‰ª•Âæ°ÂÆ§Ê´ªËÅûÂêçÔºàÈõñÈùûËä±Â≠£ÔºâÔºåÁöáÂÆ§Ê∑µÊ∫êÊ∑±Âéö„ÄÇ" },
                        { type: "visit", time: "15:00", title: "Âπ≥ÂÆâÁ•ûÂÆÆ", note: "Â∑®Â§ßÁöÑÁ¥ÖËâ≤È≥•Â±Ö„ÄÇËÖπÂú∞Âª£Â§ß„ÄÇ" },
                        { type: "shop", time: "16:30", title: "Pokemon Center Kyoto", highlight: "ËóùÂ¶ìÁöÆÂç°‰∏ò", note: "‰ΩçÊñº SUINA ÂÆ§Áî∫ 2F„ÄÇÂøÖË≤∑‰∫¨ÈÉΩÈôêÂÆöÁé©ÂÅ∂„ÄÇ" },
                        { type: "shop", time: "18:00", title: "Âêâ‰ºäÂç°Âìá Land ‰∫¨ÈÉΩÂõõÊ¢ùÊ≤≥ÂéüÁî∫", note: "Kiddyland ÂÖß„ÄÇÁπºÁ∫åË£úË≤®„ÄÇ", mapUrl: "https://goo.gl/maps/Search" }
                    ]
                },
                {
                    id: "day9",
                    date: "1/4",
                    dayOfWeek: "Êó•",
                    location: "Â§ßÈò™ ‚ûî Âè∞Âåó",
                    weather: "sunny",
                    temp: "8¬∞C",
                    items: [
                        { type: "transport", time: "08:12", title: "ÂâçÂæÄÂ§ßÈò™", note: "‰∫¨ÈÉΩËªäÁ´ô ‚Üí Â§ßÈò™ÔºàÂØÑÊîæË°åÊùéÊàñÁõ¥Êé•ÂâçÂæÄÊôØÈªûÔºâ„ÄÇ" },
                        { type: "visit", time: "09:30", title: "ATC Green Eco Plaza", note: "‰ΩçÊñºÂçóÊ∏Ø„ÄÇÂÖºÂÖ∑Áí∞‰øùÊïôËÇ≤ËàáËßÄÂÖâ„ÄÇ" },
                        { type: "visit", time: "11:00", title: "Â†∫Êù±Ë¶≥ÂÖâÊ°àÂÜÖÊâÄ", tag: "Êî∂ÈõÜ", note: "È†òÂèñÂ†∫Â∏Ç‰∫∫Â≠îËìãÂç°„ÄÇ" },
                        { 
                            type: "visit", 
                            time: "12:00", 
                            title: "Â≤∏ÂíåÁî∞Á´ôÂâçËßÄÂÖâÊ°àÂÖßÊâÄ", 
                            tag: "Êî∂ÈõÜ", 
                            note: "‰ª•Â≤∏ÂíåÁî∞Á•≠ÔºàÊãâËªäÁ•≠ÔºâËÅûÂêç„ÄÇ",
                            mapUrl: "https://goo.gl/maps/Search"
                        },
                        { 
                            type: "visit", 
                            time: "13:30", 
                            title: "„Åæ„Å°„ÅÆÈßÖ„Åã„ÅÑ„Å•„Åã", 
                            tag: "Êî∂ÈõÜ", 
                            note: "Ë≤ùÂ°öÂ∏Ç‰∫∫Â≠îËìãÂç°„ÄÇÁáüÊ•≠ÊôÇÈñì10:00‚Äì19:00„ÄÇ",
                            mapUrl: "https://goo.gl/maps/Search"
                        },
                        { type: "visit", time: "15:00", title: "Ê≥â‰ΩêÈáéÂ∏ÇË¶≥ÂÖâÊÉÖÂ†±„Çª„É≥„Çø„Éº", tag: "Êî∂ÈõÜ", note: "ÈóúË•øÊ©üÂ†¥Â∞çÂ≤∏ÔºåÊúÄÂæå‰∏ÄÁ´ôÊî∂ÈõÜÔºÅ" },
                        { type: "transport", time: "16:15", title: "Êê≠‰πò CX565 ËøîÂè∞", note: "ÂÜçË¶ãÈóúË•øÔºÅÈ†êË®à 18:30 ÊäµÈÅîÂè∞Âåó„ÄÇ" } 
                    ]
                }
            ],
            manholeStock: [
                { name: "Ëá®Á©∫ÂüéÊ°àÂÖßÊâÄ", region: "Â§ßÈò™", hours: "09:00‚Äì20:00", url: "https://www.city.izumisano.lg.jp/kakuka/jogesuidokyoku/jogesui/menu/1511934914176.html" },
                { name: "Â§ßÊ¥•ËªäÁ´ôËßÄÂÖâÊ°àÂÜÖÊâÄ", region: "ÊªãË≥Ä", hours: "09:00‚Äì18:00", url: "https://www.city.otsu.lg.jp/kigyo/about/koho/68041.html", highlight: true },
                { name: "„Åè„Åï„Å§Â§¢Êú¨Èô£", region: "ÊªãË≥Ä", hours: "09:00‚Äì17:00", url: "https://www.city.kusatsu.shiga.jp/kurashi/suidogesuido/gesuido/manholecard.html" },
                { name: "ËçâÊ¥•ÂÆøË°óÈÅì‰∫§ÊµÅÈ§®", region: "ÊªãË≥Ä", hours: "09:00‚Äì17:00", url: "https://www.city.kusatsu.shiga.jp/kurashi/suidogesuido/gesuido/manholecard.html" },
                { name: "Ê†óÊù±Ë¶≥ÂÖâÊ°àÂÜÖÊâÄ ‰∫åÊ®ì", region: "ÊªãË≥Ä", hours: "08:30‚Äì12:00", url: "https://www.city.ritto.lg.jp/soshiki/jogeuido/jogesuido/oshirase/7224.html" },
                { name: "Ê†óÊù±Â∏ÇÁ´ãÂõ≥Êõ∏È§®", region: "ÊªãË≥Ä", hours: "10:00‚Äì17:00", url: "https://www.city.ritto.lg.jp/soshiki/jogeuido/jogesuido/oshirase/7224.html", highlight: true },
                { name: "ÂÆàÂ±±Â∏ÇÈßÖÂâçÁ∑èÂêàÊ°àÂÜÖÊâÄ", region: "ÊªãË≥Ä", hours: "07:30‚Äì19:30", url: "https://www.city.moriyama.lg.jp/kurashitetsuzuki/jougesuido/1001701/1008797.html" },
                { name: "ÂÖ´Êó•Â∏ÇÈßÖÂâçË¶≥ÂÖâ‰∫§ÊµÅÊñΩË®≠", region: "ÊªãË≥Ä", hours: "10:00‚Äì17:00", url: "https://www.city.higashiomi.shiga.jp/kurashi_tetsuzuki/jougesuidou/1008975/1009690.html" },
                { name: "Êù±ËøëÊ±üÂ∏ÇÂΩπÊâÄ ÂÆàË°õÂÆ§", region: "ÊªãË≥Ä", hours: "10:00‚Äì16:00", url: "https://www.city.higashiomi.shiga.jp/kurashi_tetsuzuki/jougesuidou/1008975/1008976.html", highlight: false },
                { name: "Ë±äÈÉ∑Áî∫Ë¶≥ÂÖâÊ°àÂÜÖÊâÄ", region: "ÊªãË≥Ä", hours: "09:00‚Äì17:00", url: "https://www.town.toyosato.shiga.jp/0000001749.html", highlight: true },
                { name: "ÂΩ•Ê†πÂ∏Ç‰∏ä‰∏ãÊ∞¥ÈÅìÊñôÈáë„ÅäÂÆ¢Êßò„Çµ„Éº„Éì„Çπ„Çª„É≥„Çø„Éº", region: "ÊªãË≥Ä", hours: "09:00‚Äì17:00", url: "https://www.city.hikone.lg.jp/kakuka/jogesuido/2/2219.html" },
                { name: "„Å≤„Åì„Å≠È£üË≥ìÈ§®ÂõõÁï™Áî∫„ÉÄ„Ç§„Éã„É≥„Ç∞", region: "ÊªãË≥Ä", hours: "10:00‚Äì17:00", url: "https://www.city.hikone.lg.jp/kakuka/jogesuido/2/2219.html" },
                { name: "„ÄåÈÅì„ÅÆÈßÖ Êµ∑„ÅÆ‰∫¨ÈÉΩ ÂÆÆÊ¥•„ÄçË¶≥ÂÖâÊ°àÂÜÖÊâÄ", region: "‰∫¨ÈÉΩ", hours: "09:00‚Äì18:00", url: "https://www.pref.kyoto.jp/gesuido/manholemiyazu.html" },
                { name: "Á•ûÊà∏Á©∫Ê∏Ø 1 ÈöéÁ∑èÂêàÊ°àÂÜÖÊâÄ", region: "ÂÖµÂ∫´", hours: "07:00‚Äì23:00", url: "https://www.city.kobe.lg.jp/a78445/kurashi/sumai/sewage/pr/manhole_card.html" },
                { name: "Ëä¶Â±ãÂ∏ÇÂΩπÊâÄÂÆàË°õÂÆ§", region: "ÂÖµÂ∫´", hours: "09:00‚Äì17:00", url: "https://www.city.ashiya.lg.jp/gesuidou/mhc.html", highlight: true },
                { name: "Â§ßÈò™Ë¶≥ÂÖâÊ°àÂÜÖÊâÄ(JR ËªäÁ´ôÂÖß)", region: "Â§ßÈò™", hours: "07:00‚Äì21:00", url: "https://www.city.osaka.lg.jp/kensetsu/page/0000431121.html" },
                { name: "Â•àËâØÁî∫ÂçóË¶≥ÂÖâÊ°àÂÜÖÊâÄ", region: "Â•àËâØ", hours: "09:00‚Äì17:00", url: "https://h2o.nara.nara.jp/info_924.html" },
                { name: "ÂÆáÊ≤ªÂ∏ÇË¶≥ÂÖâ„Çª„É≥„Çø„Éº", region: "‰∫¨ÈÉΩ", hours: "09:00‚Äì17:00", url: "https://www.city.uji.kyoto.jp/soshiki/12/6038.html" },
                { name: "Â§ßÈò™Â∏Ç‰∏ãÊ∞¥ÈÅìÁßëÂ≠∏È§®(ÈúÄË≥ºÁ•®ÂÖ•Â†¥ÂæåÂ°´ÂØ´ÂïèÂà∏)", region: "Â§ßÈò™", hours: "09:30‚Äì17:00", url: "https://www.city.osaka.lg.jp/kensetsu/page/0000431121.html", highlight: true },
                { name: "„Åä„Åä„Åï„Åã ATC „Ç∞„É™„Éº„É≥„Ç®„Ç≥„Éó„É©„Ç∂", region: "Â§ßÈò™", hours: "10:00‚Äì17:00", url: "https://www.city.osaka.lg.jp/kensetsu/page/0000431121.html" },
                { name: "Â†∫Êù±Ë¶≥ÂÖâÊ°àÂÜÖÊâÄ", region: "Â§ßÈò™", hours: "09:00‚Äì19:00", url: "https://water.city.sakai.lg.jp/about/kouhou/1522311572373.html" },
                { name: "Â≤∏ÂíåÁî∞ÈßÖÂâçË¶≥ÂÖâÊ°àÂÜÖÊâÄ", region: "Â§ßÈò™", hours: "09:00‚Äì17:00", url: "https://www.city.kishiwada.lg.jp/page/56-manholecard.html" },
                { name: "„Åæ„Å°„ÅÆÈßÖ„Åã„ÅÑ„Å•„Åã", region: "Â§ßÈò™", hours: "10:00‚Äì19:00", url: "https://www.city.kaizuka.lg.jp/kakuka/jogesuido/gesuisuisin/topics/manholucard.html" },
                { name: "Ê≥â‰ΩêÈáéÂ∏ÇË¶≥ÂÖâÊÉÖÂ†±„Çª„É≥„Çø„Éº", region: "Â§ßÈò™", hours: "10:00‚Äì16:00", url: "https://www.city.izumisano.lg.jp/kakuka/jogesuidokyoku/jogesui/menu/1511934914176.html" },
            ],
            notes: [
                {
                    date: "12/27ÔºàÂÖ≠Ôºâ",
                    links: [
                        { title: "Ëá®Á©∫Âüé Outlet ÈõªÂ≠êÂú∞Âúñ", url: "https://platinumaps.jp/d/premiumoutlets-rinku?floor=1F", note: "NikeÊ≤íÊúâÂÖçÁ®Ö" }
                    ],
                    dining: [
                        { name: "Êù±‰∫¨Ê≤πÁµÑÁ∑èÊú¨Â∫ó ÊªãË≥ÄÁµÑ", hours: "11:00‚Äì02:00", mapUrl: "https://goo.gl/maps/Search" },
                        { name: "È∫∫Â±ãEDITIONËçâÊ¥•Â∫ó", hours: "17:00‚Äì02:45" },
                        { name: "„Ç´„Éû„Éâ„ÅÆ„Çø„Ç≥", hours: "12:00‚Äì23:00 (Â±ÖÈÖíÂ±ã)", mapUrl: "https://goo.gl/maps/Search" }
                    ]
                },
                {
                    date: "12/28ÔºàÊó•Ôºâ",
                    links: [
                        { title: "MITSUI OUTLET PARK ÊªãË≥ÄÈæçÁéãÂú∞Âúñ", url: "https://mitsui-shopping-park.com/mop/file/filer/shiga/floor/00008_fo.pdf", note: "PDF‰∏ãËºâ" }
                    ]
                },
                {
                    date: "12/29Ôºà‰∏ÄÔºâ",
                    links: [
                        { title: "‰ºäÊ†πÊπæ„ÇÅ„Åê„ÇäÈÅäË¶ßËàπ", url: "https://www.inewan.com/inewan_cruise/", note: "1,200ÂÜÜ" },
                        { title: "ÂÇòÊùæË¶≥ÂÖâÂà∏", url: "https://www.tankai.jp/tourist_tickets/#inekasamatsu", note: "2,000ÂÜÜÂà∏" },
                        { title: "Â§©Ê©ãÁ´ã„Éì„É•„Éº„É©„É≥„Éâ (Á∫úËªä)", url: "https://www.viewland.jp/tw/eigyou/", note: "1,000ÂÜÜ" }
                    ],
                    dining: [
                        { area: "ÂÇòÊùæ", spots: [{ name: "Suginoya", hours: "11:30‚Äì16:00", note: "ÁÉèÂÜ¨" }] },
                        { area: "Â§©Ê©ãÁ´ã", spots: [{ name: "Êµ∑ÈÆÆÂ∑•Êàø Ê©ãÁ´ãÁâ©Áî¢ ÊùæËëâËüπÁõ¥Ë≥£", hours: "11:00‚Äì17:00" }] },
                        { area: "ÂÆÆÊ¥•ÂçàÈ§ê", spots: [
                            { name: "ÁÉèÂÜ¨Â∞èÂêÉÂ§ßÈñÄ", hours: "11:30‚Äì14:30„ÄÅ17:30‚Äì20:30", mapUrl: "https://goo.gl/maps/Search" },
                            { name: "„Åì„Çì„Å¥„Çâ„ÅÜ„Å©„Çì", hours: "11:00‚Äì15:00", mapUrl: "https://goo.gl/maps/Search" },
                            { name: "ÂØåÁî∞Â±ã", hours: "11:00‚Äì21:30", mapUrl: "https://goo.gl/maps/Search" },
                            { name: "Seafood Kawasaki", hours: "11:00‚Äì13:30" },
                            { name: "Â±±Êµ∑Â±ã", hours: "11:00‚Äì22:00", mapUrl: "https://goo.gl/maps/Search" },
                        ] },
                        { area: "ÂÆÆÊ¥•ÊôöÈ§ê", spots: [{ name: "„ÅäÈ£ü‰∫ãÂá¶ Ââ≤ÁÉπ„Åü„Çì„Åî", hours: "17:30‚Äì22:30" }] }
                    ]
                },
                {
                    date: "1/1ÔºàÂõõÔºâ",
                    routes: [
                        {
                            area: "ÂøÉÈΩãÊ©ã",
                            spots: [
                                { name: "ÂØ∂ÂèØÂ§¢‰∏≠ÂøÉ Â§ßÈò™Â∫ó DXÂ§ß‰∏∏ÂøÉÈΩãÊ©ã9F", hours: "10:00‚Äì20:00", mapUrl: "https://goo.gl/maps/Search" },
                                { name: "CHIIKAWA LAND Shinsaibashi PARCO Store 6F", hours: "10:00‚Äì20:00" }
                            ]
                        },
                        {
                            area: "Ê¢ÖÁî∞",
                            spots: [
                                { name: "ÂØ∂ÂèØÂ§¢‰∏≠ÂøÉ Â§ßÈò™Â§ß‰∏∏Ê¢ÖÁî∞13F", hours: "10:00‚Äì20:00" },
                                { name: "„Å°„ÅÑ„Åã„Çè„Çâ„Çì„Å© Â§ßÈò™Ê¢ÖÁî∞Â∫ó", hours: "10:00‚Äì20:00", note: "Êö´ÂÆöÈò™ÊÄ•‰∏âÁï™Ë°óÂçóÈ§®B1 37Ëôü" },
                                { name: "„Çâ„ÅÅÈ∫∫ È¥®„Å®Ëë± Ê¢ÖÁî∞Â∫ó", hours: "11:00‚Äì23:00" },
                                { name: "Ê¢ÖÁî∞ËóçÂ§©Â§ßÊ®ì", hours: "09:30‚Äì22:00" },
                                { name: "HEP FIVE Êë©Â§©Ëº™7F", hours: "11:00‚Äì22:45" }
                            ]
                        }
                    ]
                }
            ]
        };

        // --- Helper Functions ---
        const getGoogleMapUrl = (name) => `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(name)}`;

        // --- Components ---
        const WeatherIcon = ({ type }) => {
            switch (type) {
                case 'sunny': return <Sun className="w-5 h-5 text-orange-500" />;
                case 'cloudy': return <Cloud className="w-5 h-5 text-gray-500" />;
                case 'rain': return <CloudRain className="w-5 h-5 text-blue-500" />;
                case 'snow': return <Snowflake className="w-5 h-5 text-cyan-400" />;
                default: return <Sun className="w-5 h-5 text-orange-500" />;
            }
        };

        const Tag = ({ text, color }) => (
            <span className={`text-[10px] px-2 py-0.5 rounded-full border ${color} font-medium mr-2`}>
                {text}
            </span>
        );

        const Card = ({ children, className = "" }) => (
            <div className={`bg-white rounded-xl shadow-sm border border-stone-200 overflow-hidden ${className}`}>
                {children}
            </div>
        );

        const ItineraryItem = ({ item }) => {
            let Icon = MapPin;
            let iconColor = "text-stone-400";
            let borderColor = "border-stone-200";

            if (item.type === 'food') { Icon = Utensils; iconColor = "text-red-400"; borderColor="border-l-red-400"; }
            else if (item.type === 'shop') { Icon = ShoppingBag; iconColor = "text-yellow-500"; borderColor="border-l-yellow-500"; }
            else if (item.type === 'visit') { Icon = Camera; iconColor = "text-emerald-500"; borderColor="border-l-emerald-500"; }
            else if (item.type === 'hotel') { Icon = Hotel; iconColor = "text-purple-400"; borderColor="border-l-purple-400"; }
            else if (item.type === 'transport') {
                const isFlight = item.title.includes("CX564") || item.title.includes("CX565");
                const isCarRelated = item.title.includes("ÁßüËªä") || item.title.includes("ÈÇÑËªä") || item.title.includes("ÈßêËªäÂ†¥");
                if (isFlight) {
                    Icon = Plane; iconColor = "text-red-500"; borderColor = "border-l-red-500";
                } else if (isCarRelated) {
                    Icon = Car; iconColor = "text-lime-600"; borderColor = "border-l-lime-600";
                } else {
                    Icon = Train; iconColor = "text-indigo-400"; borderColor = "border-l-indigo-400";
                }
            }

            const isCollection = item.tag === "Êî∂ÈõÜ";
            if (isCollection) {
                Icon = Star; iconColor = "text-amber-500"; borderColor = "border-l-amber-500";
            }

            const titlesWithoutNavigation = ["Êê≠‰πò CX564 È£õÂæÄÂ§ßÈò™", "Êê≠‰πò CX565 ËøîÂè∞", "ÂâçÂæÄËçâÊ¥•", "ÂâçÂæÄÂ§ßÈò™"];
            const showNavigation = !titlesWithoutNavigation.includes(item.title) && item.mapUrl !== null;
            const destinationUrl = item.mapUrl || getGoogleMapUrl(item.title);

            return (
                <div className={`flex gap-4 p-4 bg-white rounded-lg border-l-4 shadow-sm mb-3 ${borderColor}`}>
                    <div className="flex flex-col items-center min-w-[50px]">
                        <span className="text-sm font-bold text-stone-600 font-mono">{item.time}</span>
                        <div className={`mt-2 p-1.5 rounded-full bg-stone-50 ${iconColor}`}>
                            <Icon size={18} />
                        </div>
                        {isCollection && <span className="text-[9px] text-amber-600 font-bold mt-1">GET!</span>}
                    </div>
                    
                    <div className="flex-1">
                        <div className="flex items-start justify-between">
                            <h3 className="font-bold text-stone-800 text-lg leading-tight w-[calc(100%-70px)] sm:w-[calc(100%-110px)]">{item.title}</h3>
                            <div className="flex gap-2 shrink-0"> 
                                {item.parkingUrl && (
                                    <a href={item.parkingUrl} target="_blank" rel="noopener noreferrer" title="ÂÅúËªä‰ΩçÁΩÆÂ∞éËà™" className="p-1.5 bg-sky-50 text-sky-600 rounded-full hover:bg-sky-100 transition-colors shrink-0">
                                        <MapPin size={16} />
                                    </a>
                                )}
                                {showNavigation ? (
                                    <a href={destinationUrl} target="_blank" rel="noopener noreferrer" title="ÁõÆÁöÑÂú∞Â∞éËà™" className="p-1.5 bg-blue-50 text-blue-600 rounded-full hover:bg-blue-100 transition-colors shrink-0">
                                        <Navigation size={16} />
                                    </a>
                                ) : (<div className="w-7 h-7 shrink-0"></div>)}
                            </div>
                        </div>

                        {item.tag && (
                            <div className="mt-1">
                                <Tag text={item.tag} color={isCollection ? "border-amber-400 text-amber-600 bg-amber-50" : "border-stone-300 text-stone-500"} />
                            </div>
                        )}

                        {item.highlight && (
                            <div className="mt-2 inline-block px-3 py-1 bg-red-50 text-red-600 text-xs rounded-md font-bold">‚òÖ {item.highlight}</div>
                        )}

                        {item.note && (
                            <p className="mt-2 text-sm text-stone-500 leading-relaxed bg-stone-50 p-2 rounded border border-stone-100">{item.note}</p>
                        )}
                    </div>
                </div>
            );
        };

        const ManholeStockStatus = ({ stockData }) => {
            return (
                <div className="animate-fade-in space-y-4">
                    <h2 className="text-xl font-bold text-stone-800 px-1 flex items-center gap-2">
                        <CreditCard size={24} className="text-amber-500" />
                        „Éû„É≥„Éõ„Éº„É´„Ç´„Éº„Éâ Âú®Â∫´Áä∂Ê≥Å
                    </h2>
                    <p className="text-sm text-stone-600 bg-indigo-50 p-3 rounded-lg border border-indigo-100 flex items-center gap-2">
                        <Info size={16} className="text-indigo-600 shrink-0"/>
                        ÁáüÊ•≠ÊôÇÈñìÁÇ∫ÂÆòÊñπÊèê‰æõ‰πãË≥áË®äÔºåË´ãÂãôÂøÖÂÜçÈªûÊìäÈÄ£ÁµêËá≥ÂÆòÊñπÁ∂≤Á´ôÁ¢∫Ë™ç„ÄÇ
                    </p>

                    <Card className="p-0">
                        <div className="overflow-x-auto">
                            <table className="min-w-full divide-y divide-stone-200">
                                <thead className="bg-stone-50 sticky top-0">
                                    <tr>
                                        <th className="px-4 py-3 text-left text-xs font-semibold text-stone-600 uppercase tracking-wider w-1/4">Âú∞ÂçÄ</th>
                                        <th className="px-4 py-3 text-left text-xs font-semibold text-stone-600 uppercase tracking-wider w-1/2">Âú∞Èªû (ÈªûÊìäÊü•Ë©¢Â∫´Â≠ò)</th>
                                        <th className="px-4 py-3 text-left text-xs font-semibold text-stone-600 uppercase tracking-wider w-1/4">ÁáüÊ•≠ÊôÇÈñì</th>
                                    </tr>
                                </thead>
                                <tbody className="bg-white divide-y divide-stone-100">
                                    {stockData.map((item, index) => (
                                        <tr key={index} className="hover:bg-indigo-50/50 transition-colors">
                                            <td className="px-4 py-3 whitespace-nowrap text-sm font-medium text-stone-900">{item.region}</td>
                                            <td className="px-4 py-3">
                                                <a href={item.url} target="_blank" rel="noopener noreferrer" className={`text-sm font-bold block ${item.highlight ? 'text-red-600 hover:text-red-800' : 'text-indigo-600 hover:text-indigo-800'}`}>
                                                    {item.name}
                                                </a>
                                            </td>
                                            <td className="px-4 py-3 whitespace-nowrap text-xs">
                                                <span className="text-emerald-600 font-bold">{item.hours}</span>
                                            </td>
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                        </div>
                    </Card>
                </div>
            );
        };

        const NavButton = ({ name, url }) => (
            <a 
                href={url || getGoogleMapUrl(name)}
                target="_blank" 
                rel="noopener noreferrer"
                title="ÁõÆÁöÑÂú∞Â∞éËà™"
                className="p-1.5 bg-blue-50 text-blue-600 rounded-full hover:bg-blue-100 transition-colors shrink-0"
            >
                <Navigation size={14} />
            </a>
        );

        const NotesView = ({ notes }) => {
            return (
                <div className="space-y-6 animate-fade-in">
                    <h2 className="text-xl font-bold text-stone-800 px-1 flex items-center gap-2">
                        <NotebookPen size={24} className="text-pink-500" />
                        Ë°åÁ®ãÂÇôË®ª
                    </h2>
                    
                    {notes.map((day, idx) => (
                        <Card key={idx} className="p-0 border-l-4 border-l-pink-400">
                            <div className="bg-stone-50 px-4 py-2 border-b border-stone-100 flex justify-between items-center">
                                <h3 className="font-bold text-stone-800">{day.date}</h3>
                            </div>
                            
                            <div className="p-4 space-y-4">
                                {day.links && (
                                    <div className="space-y-2">
                                        {day.links.map((link, i) => (
                                            <a key={i} href={link.url} target="_blank" rel="noopener noreferrer" className="flex items-center justify-between p-3 bg-white border border-indigo-100 rounded-lg shadow-sm hover:bg-indigo-50 transition-colors group">
                                                <div className="flex flex-col">
                                                    <span className="text-indigo-700 font-bold flex items-center gap-2">
                                                        {link.title}
                                                        <ExternalLink size={14} className="opacity-50 group-hover:opacity-100" />
                                                    </span>
                                                    {link.note && <span className="text-xs text-stone-500 mt-0.5">{link.note}</span>}
                                                </div>
                                            </a>
                                        ))}
                                    </div>
                                )}

                                {day.dining && (
                                    <div className="bg-orange-50/50 rounded-lg p-3 border border-orange-100">
                                        <h4 className="text-xs font-bold text-orange-600 mb-2 uppercase tracking-wide flex items-center gap-1">
                                            <Utensils size={12} /> È§êÈ£≤Ë≥áË®ä
                                        </h4>
                                        {day.dining[0].name && (
                                            <ul className="space-y-2">
                                                {day.dining.map((spot, i) => (
                                                    <li key={i} className="flex justify-between items-center text-sm">
                                                        <div className="flex flex-col">
                                                            <span className="font-bold text-stone-700">{spot.name}</span>
                                                            <span className="text-xs font-mono text-stone-500 bg-white px-1.5 py-0.5 rounded border border-orange-100 w-fit mt-0.5">{spot.hours}</span>
                                                            {spot.note && <span className="text-[10px] text-orange-600 mt-0.5">{spot.note}</span>}
                                                        </div>
                                                        <NavButton name={spot.name} url={spot.mapUrl} />
                                                    </li>
                                                ))}
                                            </ul>
                                        )}
                                        {day.dining[0].area && (
                                            <div className="space-y-3">
                                                {day.dining.map((areaGroup, i) => (
                                                    <div key={i}>
                                                        <div className="text-xs font-bold text-stone-500 mb-1 border-b border-orange-200 inline-block">{areaGroup.area}</div>
                                                        <ul className="space-y-2 pl-2">
                                                            {areaGroup.spots.map((spot, j) => (
                                                                <li key={j} className="flex justify-between items-center text-sm">
                                                                    <div className="flex flex-col">
                                                                        <span className="text-stone-700 font-medium">{spot.name}</span>
                                                                        <span className="text-[10px] font-mono text-stone-500">{spot.hours}</span>
                                                                        {spot.note && <span className="text-[10px] text-orange-600 mt-0.5">{spot.note}</span>}
                                                                    </div>
                                                                    <NavButton name={spot.name} url={spot.mapUrl} />
                                                                </li>
                                                            ))}
                                                        </ul>
                                                    </div>
                                                ))}
                                            </div>
                                        )}
                                    </div>
                                )}

                                {day.routes && (
                                    <div className="space-y-4">
                                        {day.routes.map((route, i) => (
                                            <div key={i} className="bg-sky-50 rounded-lg p-3 border border-sky-100">
                                                <h4 className="font-bold text-sky-800 mb-2 flex items-center gap-2">
                                                    <MapPin size={14} /> {route.area}
                                                </h4>
                                                <ul className="space-y-2 relative pl-4 border-l-2 border-sky-200 ml-1">
                                                    {route.spots.map((spot, j) => (
                                                        <li key={j} className="relative flex justify-between items-start">
                                                            <div className="absolute -left-[21px] top-1.5 w-2 h-2 rounded-full bg-sky-300"></div>
                                                            <div className="flex-1 pr-2">
                                                                <div className="text-sm font-bold text-stone-700">{spot.name}</div>
                                                                <div className="text-[10px] text-stone-500 font-mono">{spot.hours}</div>
                                                                {spot.note && <div className="text-[10px] text-amber-600 mt-0.5">{spot.note}</div>}
                                                            </div>
                                                            <NavButton name={spot.name} url={spot.mapUrl} />
                                                        </li>
                                                    ))}
                                                </ul>
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </div>
                        </Card>
                    ))}
                </div>
            );
        };

        const App = () => {
            const [activeTab, setActiveTab] = useState('itinerary');
            const [selectedDayId, setSelectedDayId] = useState('day1');
            const scrollContainerRef = useRef(null);

            const currentDayData = TRIP_DATA.itinerary.find(d => d.id === selectedDayId);

            useEffect(() => {
                if (scrollContainerRef.current) {
                    const selectedBtn = scrollContainerRef.current.querySelector(`[data-day="${selectedDayId}"]`);
                    if (selectedBtn) {
                        selectedBtn.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
                    }
                }
            }, [selectedDayId]);

            useEffect(() => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }, [activeTab, selectedDayId]);

            return (
                <div className="bg-stone-100 min-h-screen pb-20 font-sans text-stone-900 md:max-w-md md:mx-auto shadow-2xl overflow-hidden relative">
                    {/* Header */}
                    <div className="sticky top-0 z-50 bg-white/95 backdrop-blur-md border-b border-stone-200 shadow-sm">
                        <div className="px-4 py-3 flex justify-between items-center">
                            <div>
                                <h1 className="text-xl font-black tracking-tighter text-indigo-900">KANSAI TRIP</h1>
                                <p className="text-xs text-stone-400 font-medium tracking-widest">DEC 27 - JAN 04</p>
                            </div>
                            {activeTab === 'itinerary' && currentDayData && (
                                <div className="flex items-center gap-2 bg-stone-100 px-3 py-1.5 rounded-full">
                                    <WeatherIcon type={currentDayData.weather} />
                                    <span className="text-sm font-bold text-stone-600">{currentDayData.temp}</span>
                                    <span className="text-xs text-stone-400 pl-1 border-l border-stone-300 ml-1">{currentDayData.location}</span>
                                </div>
                            )}
                        </div>
                        
                        {activeTab === 'itinerary' && (
                            <div ref={scrollContainerRef} className="flex overflow-x-auto gap-3 px-4 pb-3 no-scrollbar snap-x">
                                {TRIP_DATA.itinerary.map((day) => (
                                    <button
                                        key={day.id}
                                        data-day={day.id}
                                        onClick={() => setSelectedDayId(day.id)}
                                        className={`flex-shrink-0 snap-center flex flex-col items-center justify-center w-14 h-16 rounded-xl border transition-all duration-300 ${
                                            selectedDayId === day.id ? "bg-indigo-600 border-indigo-600 text-white shadow-lg shadow-indigo-200 scale-105" : "bg-white border-stone-200 text-stone-400 hover:border-indigo-300"
                                        }`}
                                    >
                                        <span className="text-[10px] font-medium uppercase leading-none mb-1">{day.date}</span>
                                        <span className="text-lg font-black leading-none">{day.dayOfWeek}</span>
                                    </button>
                                ))}
                            </div>
                        )}
                    </div>

                    {/* Main Content */}
                    <div className="p-4 space-y-4 min-h-[calc(100vh-180px)]">
                        {activeTab === 'itinerary' && currentDayData && (
                            <div className="animate-fade-in-up">
                                <div className="flex items-center justify-between mb-4 px-1">
                                    <h2 className="text-lg font-bold text-stone-700">
                                        Day {selectedDayId.replace('day', '')} 
                                        <span className="ml-2 text-sm font-normal text-stone-500">{currentDayData.location}</span>
                                    </h2>
                                </div>
                                {currentDayData.items.map((item, index) => (
                                    <ItineraryItem key={index} item={item} />
                                ))}
                                <div className="h-10"></div>
                            </div>
                        )}

                        {activeTab === 'flights' && (
                            <div className="space-y-4 animate-fade-in">
                                <h2 className="text-xl font-bold text-stone-800 px-1">Ëà™Áè≠Ë≥áË®ä</h2>
                                {TRIP_DATA.flights.map((flight, idx) => (
                                    <Card key={idx} className="p-5">
                                        <div className="flex items-center justify-between mb-4 border-b border-stone-100 pb-3">
                                            <span className={`text-xs font-bold px-2 py-1 rounded ${flight.type === 'Departure' ? 'bg-indigo-100 text-indigo-700' : 'bg-orange-100 text-orange-700'}`}>
                                                {flight.type === 'Departure' ? 'ÂéªÁ®ã' : 'ÂõûÁ®ã'}
                                            </span>
                                            <span className="font-mono font-bold text-stone-500">{flight.date}</span>
                                        </div>
                                        <div className="flex justify-between items-center mb-2">
                                            <div className="text-3xl font-black text-stone-800">{flight.code}</div>
                                            <Plane className="text-stone-300 rotate-45" />
                                        </div>
                                        <div className="text-sm font-medium text-stone-600 mb-4">{flight.airline} ‚Ä¢ {flight.class}</div>
                                        <div className="bg-stone-50 p-4 rounded-lg text-center border border-stone-100">
                                            <div className="text-lg font-bold text-stone-800 mb-1">{flight.route}</div>
                                            <div className="text-xs text-stone-500">{flight.terminal} ‚Ä¢ {flight.duration} ‚Ä¢ {flight.aircraft}</div>
                                        </div>
                                    </Card>
                                ))}
                            </div>
                        )}

                        {activeTab === 'hotels' && (
                            <div className="space-y-4 animate-fade-in">
                                <h2 className="text-xl font-bold text-stone-800 px-1">‰ΩèÂÆøË≥áË®ä</h2>
                                {TRIP_DATA.hotels.map((hotel, idx) => (
                                    <Card key={idx} className="p-0">
                                        <div className="h-24 bg-gradient-to-r from-stone-200 to-stone-300 flex items-center justify-center">
                                            <Hotel className="text-white w-10 h-10 opacity-50" />
                                        </div>
                                        <div className="p-5">
                                            <div className="flex justify-between items-start mb-2">
                                                <h3 className="text-lg font-bold text-stone-800 leading-tight w-3/4">{hotel.name}</h3>
                                                <span className="text-xs bg-stone-100 text-stone-600 px-2 py-1 rounded font-medium whitespace-nowrap">{hotel.dates}</span>
                                            </div>
                                            <p className="text-xs text-stone-400 mb-4 font-mono">{hotel.engName}</p>
                                            <div className="flex items-start gap-2 mb-4 text-sm text-stone-600">
                                                <MapPin size={16} className="mt-0.5 text-stone-400 shrink-0" />
                                                <span>{hotel.location}</span>
                                            </div>
                                            <div className="flex flex-wrap gap-2 mb-4">
                                                {hotel.features.map((f, i) => (
                                                    <span key={i} className="text-[10px] px-2 py-1 bg-indigo-50 text-indigo-600 rounded">{f}</span>
                                                ))}
                                            </div>
                                            <div className="bg-amber-50 p-3 rounded text-xs text-amber-800 border border-amber-100 flex gap-2">
                                                <Info size={14} className="shrink-0 mt-0.5" />
                                                {hotel.note}
                                            </div>
                                            <a 
                                                href={`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(hotel.name)}`}
                                                target="_blank"
                                                className="mt-4 block w-full py-2 bg-stone-800 text-white text-center rounded-lg text-sm font-bold hover:bg-stone-700 transition"
                                            >
                                                Â∞éËà™Ëá≥È£ØÂ∫ó
                                            </a>
                                        </div>
                                    </Card>
                                ))}
                            </div>
                        )}

                        {activeTab === 'manhole' && (
                            <ManholeStockStatus stockData={TRIP_DATA.manholeStock} />
                        )}

                        {activeTab === 'notes' && (
                            <NotesView notes={TRIP_DATA.notes} />
                        )}
                    </div>

                    {/* Bottom Navigation */}
                    <div className="fixed bottom-0 left-0 right-0 bg-white border-t border-stone-200 md:max-w-md md:mx-auto pb-safe safe-area-bottom z-50">
                        <div className="flex justify-around items-center h-16">
                            <button onClick={() => setActiveTab('itinerary')} className={`flex flex-col items-center justify-center flex-1 h-full space-y-1 transition-colors ${activeTab === 'itinerary' ? 'text-indigo-600' : 'text-stone-400'}`}>
                                <Calendar size={20} strokeWidth={activeTab === 'itinerary' ? 2.5 : 2} />
                                <span className="text-[10px] font-medium">Ë°åÁ®ã</span>
                            </button>
                            <button onClick={() => setActiveTab('flights')} className={`flex flex-col items-center justify-center flex-1 h-full space-y-1 transition-colors ${activeTab === 'flights' ? 'text-indigo-600' : 'text-stone-400'}`}>
                                <Plane size={20} strokeWidth={activeTab === 'flights' ? 2.5 : 2} />
                                <span className="text-[10px] font-medium">Ëà™Áè≠</span>
                            </button>
                            <button onClick={() => setActiveTab('hotels')} className={`flex flex-col items-center justify-center flex-1 h-full space-y-1 transition-colors ${activeTab === 'hotels' ? 'text-indigo-600' : 'text-stone-400'}`}>
                                <Hotel size={20} strokeWidth={activeTab === 'hotels' ? 2.5 : 2} />
                                <span className="text-[10px] font-medium">‰ΩèÂÆø</span>
                            </button>
                            <button onClick={() => setActiveTab('manhole')} className={`flex flex-col items-center justify-center flex-1 h-full space-y-1 transition-colors ${activeTab === 'manhole' ? 'text-indigo-600' : 'text-stone-400'}`}>
                                <CreditCard size={20} strokeWidth={activeTab === 'manhole' ? 2.5 : 2} /> 
                                <span className="text-[10px] font-medium">Âú®Â∫´</span> 
                            </button>
                            <button onClick={() => setActiveTab('notes')} className={`flex flex-col items-center justify-center flex-1 h-full space-y-1 transition-colors ${activeTab === 'notes' ? 'text-pink-600' : 'text-stone-400'}`}>
                                <NotebookPen size={20} strokeWidth={activeTab === 'notes' ? 2.5 : 2} /> 
                                <span className="text-[10px] font-medium">ÂÇôË®ª</span> 
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
